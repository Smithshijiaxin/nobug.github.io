(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-432baf83"],{"87c9":function(t,e,i){"use strict";var a=i("b27e");i.n(a).a},b27e:function(t,e,i){},dc2b:function(t,e,i){"use strict";i.r(e);i("c5f6");var a=i("f499"),n=i.n(a),o=i("e814"),s=i.n(o),r=(i("55dd"),i("7f7f"),i("ac6a"),i("cebc")),c=i("d8af"),l=i("42a2"),h=i("2f62"),p=(i("bc3a"),i("c276")),d=i("133f"),u=(i("20d6"),i("a4bb")),m=i.n(u),g=(i("7514"),i("a599")),f={beforeRouteLeave:function(t,e,i){""==this.comTimer&&null==this.comTimer||clearInterval(this.comTimer),""==this.waitTimer&&null==this.waitTimer||clearInterval(this.waitTimer),""==this.complateTimer&&null==this.complateTimer||clearInterval(this.complateTimer)},data:function(){return{pathDataloading:!1,waitDataloading:!1,completeDataloading:!1,menuVisible:!1,activeName:"进行中",toGetNewDataShow:!1,ueUp:!1,searchValue:"",contentHeight:"height:"+(window.innerHeight-180)+"px",formHeight:"height:"+(window.innerHeight-240)+"px",tabHeight:window.innerHeight-240,submitFormrules:{},pathData:[],midpathData:[],submitForm:{project_path:"",config_path:"",output:"",isJPG:"",lengthx:"",lengthy:"",warmframes:"",isMOV:"",Capture_Gamut:"",sequnce_time:"120",ip:"",isNew:""},addxuanranShow:!0,navigationType:"",needOverHeight:0,midcompleteData:[],completeData:[],midWaitData:[],waitData:[],complateTimer:"",comTimer:"",waitTimer:""}},computed:Object(r.a)({},Object(h.e)("d2admin/user",["info"])),watch:{activeName:function(t){if("进行中"==t){this.pathDataloading=!0,""==this.waitTimer&&null==this.waitTimer||clearInterval(this.waitTimer),""==this.complateTimer&&null==this.complateTimer||clearInterval(this.complateTimer),""==this.comTimer&&null==this.comTimer||clearInterval(this.comTimer);var e={type:"UE5_options",data:{option:"doing",json_path:"K:/temp/tgkw/".concat(p.a.socketRender.getRnadomFiveInt(),".json")}};this.comTimer=setInterval(function(){p.a.socketRender.websock.send(n()(e))},1e4),p.a.socketRender.websock.send(n()(e))}if("排队中"==t){this.waitDataloading=!0,""==this.comTimer&&null==this.comTimer||clearInterval(this.comTimer),""==this.complateTimer&&null==this.complateTimer||clearInterval(this.complateTimer),""==this.waitTimer&&null==this.waitTimer||clearInterval(this.waitTimer);var i={type:"UE5_options",data:{option:"wait",json_path:"K:/temp/tgkw/".concat(p.a.socketRender.getRnadomFiveInt(),".json")}};this.waitTimer=setInterval(function(){p.a.socketRender.websock.send(n()(i))},1e4),p.a.socketRender.websock.send(n()(i))}if("已完成"==t){this.completeDataloading=!0,""==this.comTimer&&null==this.comTimer||clearInterval(this.comTimer),""==this.waitTimer&&null==this.waitTimer||clearInterval(this.waitTimer),""==this.complateTimer&&null==this.complateTimer||clearInterval(this.complateTimer);var a={type:"UE5_options",data:{option:"complete",json_path:"K:/temp/tgkw/".concat(p.a.socketRender.getRnadomFiveInt(),".json")}};this.complateTimer=setInterval(function(){p.a.socketRender.websock.send(n()(a))},1e4),p.a.socketRender.websock.send(n()(a))}}},created:function(){window.ue?(this.navigationType="ue",this.needOverHeight=60):(this.navigationType="web",this.needOverHeight=0),this.$task.setnav("",this),this.name=this.info.userDetails.name,this.contentHeight="height:"+(window.innerHeight-180+this.needOverHeight)+"px",this.formHeight="height:"+(window.innerHeight-240+this.needOverHeight)+"px",this.tabHeight=window.innerHeight-240+this.needOverHeight},mounted:function(){this.getRanderData();var t=this;window.addEventListener("resize",this.getHeight),g.a.$on("UERanderDoing",function(e){var i=e.json_path;setTimeout(function(){window.ue.obj.webgetfile(i).then(function(e){var i=[];JSON.parse(e).doing.forEach(function(t){null!=t&&i.push(t)});var a=i;a.forEach(function(e){e.projectName=e.project_path.slice(t.find(e.project_path,"/",0)+1,t.find(e.project_path,"/",1)),m()(e.map_paths).forEach(function(t){e.map_pathsKey=t.slice(t.indexOf("Content")-1,t.length),e.map_pathsVal=e.map_paths[t].slice(t.indexOf("Content")-1,t.length)}),e.type="进行中",e.searchKeyWord="".concat(e.projectName).concat(e.map_pathsKey).concat(e.username),e.number=e.map_pathsKey.slice(e.map_pathsKey.lastIndexOf("/")+1,e.map_pathsKey.lastIndexOf("."))}),t.midpathData=a,""!=t.searchValue&&null!=t.searchValue||(t.pathData=a),t.toGetNewDataShow=!1,t.pathDataloading=!1})},500)}),g.a.$on("UERanderWait",function(e){var i=e.json_path;setTimeout(function(){window.ue.obj.webgetfile(i).then(function(e){var i=[];JSON.parse(e).wait.forEach(function(t){null!=t&&i.push(t)});var a=i;a.forEach(function(e){e.projectName=e.project_path.slice(t.find(e.project_path,"/",0)+1,t.find(e.project_path,"/",1)),m()(e.map_paths).forEach(function(t){e.map_pathsKey=t.slice(t.indexOf("Content")-1,t.length),e.map_pathsVal=e.map_paths[t].slice(t.indexOf("Content")-1,t.length)}),e.type="排队中",e.searchKeyWord="".concat(e.projectName).concat(e.map_pathsKey).concat(e.username),e.property=void 0==e.property?0:e.property,e.number=e.map_pathsKey.slice(e.map_pathsKey.lastIndexOf("/")+1,e.map_pathsKey.lastIndexOf("."))}),0!=a.length&&t.$task.arrSortForObj(a,"property","desc"),t.midWaitData=a,""!=t.searchValue&&null!=t.searchValue||(t.waitData=a),t.toGetNewDataShow=!1,t.waitDataloading=!1})},500)}),g.a.$on("UERandercomplete",function(e){var i=e.json_path;setTimeout(function(){window.ue.obj.webgetfile(i).then(function(e){var i=[];JSON.parse(e).complete.forEach(function(t){null!=t&&i.push(t)});var a=i;a.forEach(function(e){e.projectName=e.project_path.slice(t.find(e.project_path,"/",0)+1,t.find(e.project_path,"/",1)),m()(e.map_paths).forEach(function(t){e.map_pathsKey=t.slice(t.indexOf("Content")-1,t.length),e.map_pathsVal=e.map_paths[t].slice(t.indexOf("Content")-1,t.length)}),e.type="完成",e.searchKeyWord="".concat(e.projectName).concat(e.map_pathsKey).concat(e.username),e.number=e.map_pathsKey.slice(e.map_pathsKey.lastIndexOf("/")+1,e.map_pathsKey.lastIndexOf("."))}),t.midcompleteData=a,""!=t.searchValue&&null!=t.searchValue||(t.completeData=a),t.toGetNewDataShow=!1,t.completeDataloading=!1})},500)})},destroyed:function(){window.removeEventListener("resize",this.getHeight)},components:{},methods:{toCancelHandel:function(t){var e={type:"UE5_options",data:{option:"cancelTheTask",sourcekeyList:[t.sourcekey]}};p.a.socketRender.websock.send(n()(e)),this.toGetNewData()},toCancelIPHandel:function(t){var e={type:"UE5_options",data:{option:"cancelTheTask_IP",sourcekeyList:[t.sourcekey]}};p.a.socketRender.websock.send(n()(e)),this.toGetNewData()},toUpPriorityHandel:function(t){var e={type:"UE5_options",data:{option:"pro_TheTask",sourcekeyList:[t.sourcekey]}};p.a.socketRender.websock.send(n()(e)),this.toGetNewData()},delOkHistory:function(t){var e={type:"UE5_options",data:{option:"deleteTask",sourcekeyList:[t.sourcekey]}};p.a.socketRender.websock.send(n()(e)),this.toGetNewData()},submitOkHistory:function(t){var e={type:"UE5_options",data:{option:"resubmitTask",sourcekeyList:[t.sourcekey]}};p.a.socketRender.websock.send(n()(e)),this.toGetNewData()},rightClick:function(t,e,i){("排队中"!=this.activeName||this.$task.testingJurisdiction("TNJgECiM"))&&("已完成"!=this.activeName||this.$task.testingJurisdiction("n1Muk2qN"))&&(this.treeOneData=t,this.menuVisible=!1,this.menuVisible=!0,document.addEventListener("click",this.foo),this.$refs.menuTree.style.left=i.clientX-380+"px",i.clientY-170>this.$refs.randerbordercard.$el.offsetHeight?this.$refs.frameShow.style.top=i.clientY-200+"px":this.$refs.menuTree.style.top=i.clientY-100+"px")},foo:function(){this.menuVisible=!1,document.removeEventListener("click",this.foo)},toGetNewData:function(){if(this.toGetNewDataShow=!0,"进行中"==this.activeName){var t={type:"UE5_options",data:{option:"doing",json_path:"K:/temp/tgkw/".concat(p.a.socketRender.getRnadomFiveInt(),".json")}};p.a.socketRender.websock.send(n()(t))}if("排队中"==this.activeName){var e={type:"UE5_options",data:{option:"wait",json_path:"K:/temp/tgkw/".concat(p.a.socketRender.getRnadomFiveInt(),".json")}};p.a.socketRender.websock.send(n()(e))}if("已完成"==this.activeName){var i={type:"UE5_options",data:{option:"complete",json_path:"K:/temp/tgkw/".concat(p.a.socketRender.getRnadomFiveInt(),".json")}};p.a.socketRender.websock.send(n()(i))}},find:function(t,e,i){for(var a=t.indexOf(e),n=0;n<i;n++)a=t.indexOf(e,a+1);return a},setTimeStamp:function(t){if(null==t||""==t||0==t)return"--";var e=new Date;return e.setTime(1e3*t),e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+"/"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},getRanderData:function(){this.pathDataloading=!0,this.waitDataloading=!0;var t={type:"UE5_options",data:{option:"wait",json_path:"K:/temp/tgkw/".concat(p.a.socketRender.getRnadomFiveInt(),".json")}};p.a.socketRender.websock.send(n()(t));var e={type:"UE5_options",data:{option:"doing",json_path:"K:/temp/tgkw/".concat(p.a.socketRender.getRnadomFiveInt(),".json")}};p.a.socketRender.websock.send(n()(e)),""==this.comTimer&&null==this.comTimer||clearInterval(this.comTimer),this.comTimer=setInterval(function(){p.a.socketRender.websock.send(n()(e))},1e4)},tabclickHandel:function(t,e){},sequnce_timeChange:function(){this.submitForm.sequnce_time>=120||(this.$message({type:"warning",message:"等待时间最少为120秒"}),this.submitForm.sequnce_time=120)},gamutChange:function(){Number(this.submitForm.Capture_Gamut)>=0&&Number(this.submitForm.Capture_Gamut)<=5||(this.$message({type:"warning",message:"0到5之间的值"}),this.submitForm.Capture_Gamut=0)},toDelpath:function(t){var e=this;this.$confirm("确认删除当前数据？").then(function(i){function a(e){return e.dirName==t.dirName}var n=e.pathData.findIndex(a),o=e.midpathData.findIndex(a);-1!=n&&e.pathData.splice(n,1),-1!=o&&e.midpathData.splice(n,1),e.$message({type:"success",message:"删除成功"})}).catch(function(t){})},handleSearchChange:function(t){var e=this;if("进行中"==this.activeName){var i=this.midpathData.filter(function(t){return~t.searchKeyWord.indexOf(e.searchValue)});this.pathData=i,""!=this.searchValue&&null!=this.searchValue||(this.pathData=this.midpathData)}if("排队中"==this.activeName){var a=this.midwaitData.filter(function(t){return~t.searchKeyWord.indexOf(e.searchValue)});this.waitData=a,""!=this.searchValue&&null!=this.searchValue||(this.pathData=this.midpathData)}if("已完成"==this.activeName){var n=this.midcompleteData.filter(function(t){return~t.searchKeyWord.indexOf(e.searchValue)});this.completeData=n,""!=this.searchValue&&null!=this.searchValue||(this.completeData=this.midcompleteData)}},getUeData:function(t){this.ueUp=!0,this.submitForm.project_path=t.project,this.submitForm.config_path="",this.submitForm.output="",this.submitForm.isJPG="",this.submitForm.lengthx="",this.submitForm.lengthy="",this.submitForm.warmframes="",this.submitForm.isMOV="",this.submitForm.Capture_Gamut="",this.submitForm.sequnce_time="120",this.submitForm.ip="",this.submitForm.isNew="",this.midpathData=JSON.parse(n()(t.fileList)),this.pathData=t.fileList},xuanranClose:function(){this.addxuanranShow=!1},getHeight:function(){this.contentHeight="height:"+(window.innerHeight-180+this.needOverHeight)+"px",this.formHeight="height:"+(window.innerHeight-240-this.needOverHeight)+"px",this.tabHeight=window.innerHeight-240-this.needOverHeight}}},w=i("2877"),b=Object(w.a)(f,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-row",{ref:"randerbordercard",staticClass:"randerbordercard",style:t.contentHeight},[i("div",{staticClass:"imgInput2 tableinputPost1"},[i("div",{staticClass:"batchAddModelBtns1"},[i("el-button",{staticClass:"colorC",attrs:{size:"mini",plain:"",loading:t.toGetNewDataShow},on:{click:t.toGetNewData}},[t._v("刷新")])],1),i("el-input",{staticStyle:{width:"200px","vertical-align":"top"},attrs:{placeholder:"请输入",size:"mini",clearable:""},on:{blur:t.handleSearchChange},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearchChange(e)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),i("el-tabs",{on:{"tab-click":t.tabclickHandel},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"进行中",name:"进行中"}},[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" 进行中("+t._s(t.pathData.length)+") ")]),i("el-col",{attrs:{span:24}},[i("div",{staticClass:"\n              powerBoxStyle\n              dataBox\n              personalMessage\n              tableBox\n              renderTableStyle\n            "},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.pathDataloading,expression:"pathDataloading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"#252423",data:t.pathData,height:t.tabHeight,border:""}},[i("el-table-column",{attrs:{prop:"number",label:"序列",width:"200"}}),i("el-table-column",{attrs:{prop:"tips",label:"状态",width:"200"}}),i("el-table-column",{attrs:{prop:"projectName",label:"项目",width:"100",align:"center"}}),i("el-table-column",{attrs:{prop:"map_pathsKey",label:"关卡序列"}}),i("el-table-column",{attrs:{prop:"username",label:"提交人",width:"120",align:"center"}}),i("el-table-column",{attrs:{prop:"tips",label:"提交时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v("\n                    "+t._s(t.setTimeStamp(e.row.submit_time))+"\n                  ")])]}}])}),i("el-table-column",{attrs:{prop:"type",label:"状态类型",width:"100",align:"center"}}),i("el-table-column",{attrs:{prop:"ip",label:"IP",width:"150"}})],1)],1)])],1),i("el-tab-pane",{attrs:{label:"排队中",name:"排队中"}},[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" 排队中("+t._s(t.waitData.length)+") ")]),i("el-col",{attrs:{span:24}},[i("div",{staticClass:"\n              powerBoxStyle\n              dataBox\n              personalMessage\n              tableBox\n              renderTableStyle\n            "},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.waitDataloading,expression:"waitDataloading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"#252423",data:t.waitData,height:t.tabHeight,border:""},on:{"row-contextmenu":t.rightClick}},[i("el-table-column",{attrs:{prop:"number",label:"序列",width:"200"}}),i("el-table-column",{attrs:{prop:"tips",label:"状态",width:"200"}}),i("el-table-column",{attrs:{prop:"projectName",label:"项目",width:"100",align:"center"}}),i("el-table-column",{attrs:{prop:"map_pathsKey",label:"关卡序列"}}),i("el-table-column",{attrs:{prop:"username",label:"提交人",width:"120",align:"center"}}),i("el-table-column",{attrs:{prop:"tips",label:"提交时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v("\n                    "+t._s(t.setTimeStamp(e.row.submit_time))+"\n                  ")])]}}])}),i("el-table-column",{attrs:{prop:"type",label:"状态类型",width:"100",align:"center"}}),i("el-table-column",{attrs:{prop:"ip",label:"IP",width:"150"}})],1)],1)])],1),i("el-tab-pane",{attrs:{label:"已完成",name:"已完成"}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"\n              powerBoxStyle\n              dataBox\n              personalMessage\n              tableBox\n              renderTableStyle\n            "},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.completeDataloading,expression:"completeDataloading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"#252423",data:t.completeData,height:t.tabHeight,border:""},on:{"row-contextmenu":t.rightClick}},[i("el-table-column",{attrs:{prop:"number",label:"序列",width:"200"}}),i("el-table-column",{attrs:{prop:"tips",label:"状态",width:"100",align:"center"}}),i("el-table-column",{attrs:{prop:"projectName",label:"项目",width:"100",align:"center"}}),i("el-table-column",{attrs:{prop:"map_pathsKey",label:"关卡序列"}}),i("el-table-column",{attrs:{prop:"username",label:"提交人",width:"120",align:"center"}}),i("el-table-column",{attrs:{prop:"tips",label:"提交时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v("\n                    "+t._s(t.setTimeStamp(e.row.submit_time))+"\n                  ")])]}}])}),i("el-table-column",{attrs:{prop:"type",label:"状态类型",width:"100",align:"center"}}),i("el-table-column",{attrs:{prop:"ip",label:"IP",width:"150"}})],1)],1)])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],ref:"menuTree",staticClass:"rightClickBox1",staticStyle:{top:"10px",left:"10px"}},[i("ul",{staticClass:"menu",attrs:{id:"menu"}},[i("span",["排队中"==t.activeName?i("div",[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.toCancelHandel(t.treeOneData)}}},[i("span",[t._v("取消渲染")])])],1):t._e(),"排队中"==t.activeName?i("div",[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.toCancelIPHandel(t.treeOneData)}}},[i("span",[t._v("清除IP限制")])])],1):t._e(),"排队中"==t.activeName?i("div",[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.toUpPriorityHandel(t.treeOneData)}}},[i("span",[t._v("提升优先级")])])],1):t._e(),"已完成"==t.activeName?i("div",[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.delOkHistory(t.treeOneData)}}},[i("span",[t._v("删除已完成记录")])])],1):t._e(),"已完成"==t.activeName?i("div",[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.submitOkHistory(t.treeOneData)}}},[i("span",[t._v("重新提交已完成的记录")])])],1):t._e()])])])],1)],1)},[],!1,null,"768ff9a3",null);b.options.__file="rander.vue";var v=b.exports,y=i("1684"),_={data:function(){return{pythonScriptList:[{name:"修改材质命名",tip:"目标是骨骼网格体，修改材质命名及材质插槽的名称（例：_SD修改为_SG或_UEC_SD去掉_SD)",local_name:"setStaticMeshAndSkeletalMesh.py",local_path:"/Content/TGYC/pythonLibrary"}]}},computed:Object(r.a)({},Object(h.e)("d2admin/user",["info"])),created:function(){},mounted:function(){},destroyed:function(){},components:{},methods:{runScript:function(t){this.runPythonScript(t.local_name,t.local_path)},runPythonScript:function(t,e){var i=this,a={},n="",o=function(){window.ue.obj.webgetfilestat(n).then(function(t){var e=JSON.parse(t);s()(e.mtime_tamp)<s()(a.mtime)?c():r()}).catch(function(t){i.$notify({title:"错误",message:"获取文件状态失败",position:"bottom-right",type:"warning"})})},r=function(){window.ue.obj.webrunpython(n,"").then(function(){i.$notify({title:"成功",message:"执行完成",position:"bottom-right",type:"success"})}).catch(function(t){i.$notify({title:"错误",message:"运行错误，请联系管理员",position:"bottom-right",type:"warning"})})},c=function(){var o={name:a.local_name,size:a.size,id:n,type:"down",localPath:n,serverPath:a.disk_path+a.server_path,nodisk_path:e+"/"+t,successFc:function(t){r()},progressFc:function(t){},failFc:function(t){i.$notify({title:"错误",message:"脚本下载失败，运行失败",position:"bottom-right",type:"warning"})}};p.a.file.addDownList(o)},l={local_name:t,local_path:e};Object(y.c)(l).then(function(t){a=t[0],window.ue.obj.webgetdownloadprojectpath().then(function(t){var e=t.slice(0,t.length-1);n=e+a.local_path+"/"+a.local_name,o()}).catch(function(t){i.$notify({title:"错误",message:"项目路径获取失败",position:"bottom-right",type:"warning"})})}).catch(function(){i.$notify({title:"错误",message:"运行失败",position:"bottom-right",type:"warning"})})}}},k=Object(w.a)(_,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"assetToolBox"},[i("div",{staticClass:"assetToolTitle"},[t._v("资产工具")]),i("div",{staticClass:"assetToolListContent"},t._l(t.pythonScriptList,function(e){return i("div",{staticClass:"assetToolList"},[i("div",{staticClass:"assetToolName"},[t._v("\n        "+t._s(e.name)+"\n      ")]),i("div",{staticClass:"assetToolTip"},[t._v("\n        "+t._s(e.tip)+"\n      ")]),i("div",{staticClass:"assetToolbtn"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.runScript(e)}}},[t._v("执行")])],1)])}),0)])},[],!1,null,null,null);k.options.__file="assetTool.vue";var x=k.exports,S=i("23ba"),H=i("7e79"),T={data:function(){return{lookGroup:!0,clickType:"add",groupList:[],toSeeGroupShow:!1,isRander:!1,treeData:[{id:"1",name:"渲染"},{id:"2",name:"资产工具"}],submitForm:{renderer:""},rendereropation:[{id:"1",name:"新渲染器"},{id:"2",name:"老渲染器"}],formatopation:[{id:"1",name:"AVI视频",disabled:!1},{id:"2",name:"序列帧",disabled:!1}],handleSearchShow:!1,toSetThumShow:!0,toDelBtnShow:!0,optionCircleimg:"",isTihuanMax:!0,allMidDownList:[],moreBoard:!1,boardList:[],clickModel:"",allBoardList:[],addBoardSearch:"",addBoardShow:!1,changeClassValue:"",activeColor:"baseblock",toSetSetUpShow:!1,isShowLoc:!0,isShowName:!1,menuVisible:!1,changeCnameShow:!1,toSetAssetsShow:!1,toClickArr:[],isShift:!1,shopCardShow:!1,shopCart:[],navigationType:"",needOverHeight:0,imgVal:0,viewShow:!0,canUpload:!0,uploadLoading:!1,assetsFile:[],linkFile:[],refFileShow:!0,activeName:"first",labelValue:[],clickData:{classValue:[]},imgOneIntroShow:!1,maskHeigth:"height:"+window.innerHeight+"px",fileCaozuoHeigth:"height:"+(window.innerHeight-160)+"px",inputStyleWidth:"width:".concat(.416*window.innerWidth-180,"px"),elmainImgHeight:"height:".concat(window.innerHeight-102,"px;"),elmaincontentHeight:"height:".concat(window.innerHeight-125,"px;"),fileBoxHeight:"height:".concat(window.innerHeight-440,"px;"),contentHeight:"height:"+(window.innerHeight-180)+"px",treeHeight:"height:"+(window.innerHeight-80)+"px",treeBoxHeight1:"height:"+((window.innerHeight-80)/2-400)+"px",treeBoxHeight2:"height:"+((window.innerHeight-80)/2+430)+"px",fileFileHeigth:"height:".concat((window.innerHeight-250)/2,"px;  overflow-y: auto;"),fileFileHeigth1:"height:".concat((window.innerHeight-250)/2,"px;  overflow-y: auto;"),imgurl:"http://hl.tgyc.com",uploadImgs:[],imgSer:"".concat(this.HOST,"/index.php/home/Upload/upload"),headers:{"X-token":"".concat(p.a.cookies.get("token"))},uploadImgShow:!1,imgsArr:[],rightClickData:"",colValue:4,sliderVal:6,rightIconShow:!1,imgWidthHeight:{width:"",height:""},imgpriWidthHeight:{width:"",height:""},midallClassTree:"",modelIntroShow:!1,currentPage:1,pageSize:100,countNum:0,treeClickData:"",searchValue:"",viewerbox:null}},computed:Object(r.a)({},Object(h.e)("d2admin/user",["info"])),created:function(){window.ue?(this.navigationType="ue",this.needOverHeight=60):(this.navigationType="web",this.needOverHeight=0),this.UEListenerEvent();var t=[],e=Object(l.b)("".concat(this.info.userDetails.id).concat(this.info.userDetails.token,"l7H8avPc"));this.info.userDetails.rolepower.forEach(function(i){i.encryptionStr==e&&t.push(1)}),0==t.length&&(this.toDelBtnShow=!1);var i=[],a=Object(l.b)("".concat(this.info.userDetails.id).concat(this.info.userDetails.token,"vZpIiJoL"));this.info.userDetails.rolepower.forEach(function(t){t.encryptionStr==a&&i.push(1)}),0==i.length&&(this.toSetThumShow=!1),this.$task.setnav("",this),this.name=this.info.userDetails.name,this.treeHeight="height:"+(window.innerHeight-80+this.needOverHeight)+"px",this.contentHeight="height:"+(window.innerHeight-180+this.needOverHeight)+"px",this.treeBoxHeight1="height:"+((window.innerHeight-80)/2-400)+"px",this.treeBoxHeight2="height:"+((window.innerHeight-80)/2+430+this.needOverHeight)+"px",this.elmainImgHeight="height:".concat(window.innerHeight-102+this.needOverHeight,"px;"),this.elmaincontentHeight="height:".concat(window.innerHeight-125+this.needOverHeight-30,"px;"),this.fileBoxHeight="height:".concat(window.innerHeight-440+this.needOverHeight-30,"px;")},mounted:function(){this.lookGroup=this.$task.testingJurisdiction("RKtCMiA6"),window.addEventListener("resize",this.getHeight)},destroyed:function(){window.removeEventListener("resize",this.getHeight)},components:{VueCropper:H.VueCropper,submitDia:d.a,rander:v,assetTool:x},watch:{},methods:Object(r.a)({},Object(h.b)("d2admin/account",["logout"]),Object(h.b)("d2admin/page",["closeAll"]),{toEditGroup:function(t){this.clickType="edit",t.isEdit=!0},toDelGroup:function(t,e){var i=this;this.$confirm("确认删除该组？").then(function(a){var n={id:t.id};Object(S.b)(n).then(function(a){i.$message({type:"success",message:"删除成功"}),i.groupList.splice(e,1),t.isEdit=!1})}).catch(function(t){})},toAddGroupHandel:function(t){var e=this;if(""!=t.name&&null!=t.name)if(""!=t.sort&&null!=t.sort)if("add"==this.clickType){var i={name:t.name,sort:t.sort};Object(S.a)(i).then(function(i){e.$message({type:"success",message:"添加成功"}),t.isEdit=!1,t.id=i})}else{var a={id:t.id,name:t.name,sort:t.sort};Object(S.d)(a).then(function(i){e.$message({type:"success",message:"修改成功"}),t.isEdit=!1})}else this.$message({type:"warning",message:"排序不能为空"});else this.$message({type:"warning",message:"名字不能为空"})},toCancleGroupHandel:function(t,e){"add"==this.clickType&&this.groupList.splice(t,1),e.isEdit=!1},toAddGruop:function(){this.clickType="add";this.groupList.unshift({name:"",sort:"",isEdit:!0})},toSeeGroup:function(){var t=this;Object(S.c)().then(function(e){var i=[];e.forEach(function(t){i.push({id:t.id,name:t.name,sort:t.sort,isEdit:!1})}),0==i.length?t.groupList=[]:(t.$task.arrSortForObj(i,"sort","desc"),t.groupList=i),t.toSeeGroupShow=!0})},toSeeRanderProcess:function(){this.isRander=!0},toSeeRanderProcess1:function(){this.isRander=!1},UEListenerEvent:function(){var t=this,e=this;window.addEventListener("ue_web_add_render",function(i){t.addxuanranShow=!0,t.$nextTick(function(){e.$refs.submitDia1.getUeData(i.backData)})})},getHeight:function(){this.maskHeigth="height:"+window.innerHeight+"px",this.fileCaozuoHeigth="height:"+(window.innerHeight-160)+"px",this.inputStyleWidth="width:".concat(.416*window.innerWidth-180,"px"),this.fileFileHeigth="height:".concat((window.innerHeight-250)/2,"px;  overflow-y: auto;"),this.fileFileHeigth1="height:".concat((window.innerHeight-250)/2,"px;  overflow-y: auto;"),this.treeHeight="height:"+(window.innerHeight-80+this.needOverHeight)+"px",this.treeBoxHeight1="height:"+((window.innerHeight-80)/2-400)+"px",this.treeBoxHeight2="height:"+((window.innerHeight-80)/2+430+this.needOverHeight)+"px",this.contentHeight="height:"+(window.innerHeight-180+this.needOverHeight)+"px",this.elmainImgHeight="height:".concat(window.innerHeight-102+this.needOverHeight,"px;"),this.elmaincontentHeight="height:".concat(window.innerHeight-125+this.needOverHeight-30,"px;"),this.fileBoxHeight="height:".concat(window.innerHeight-440+this.needOverHeight-30,"px;")},treeClick:function(t,e){this.treeClickData=t},runPythonScript:function(){var t=this,e={},i="",a="setStaticMeshAndSkeletalMesh.py",n=function(){window.ue.obj.webgetfilestat(i).then(function(t){var i=JSON.parse(t);s()(i.mtime_tamp)<s()(e.mtime)?r():o()}).catch(function(e){t.$message({message:"获取文件状态失败",type:"warning"})})},o=function(){window.ue.obj.webrunpython(i,"").then(function(){}).catch(function(e){t.$message({message:"运行错误，请联系管理员",type:"warning"})})},r=function(){var n={name:e.local_name,size:e.size,id:i,type:"down",localPath:i,serverPath:e.disk_path+e.server_path,nodisk_path:"/Content/TGYC/pythonLibrary/"+a,successFc:function(t){o()},progressFc:function(t){},failFc:function(e){t.$message({message:"脚本下载失败，运行失败",type:"warning"})}};p.a.file.addDownList(n)},c={local_name:a,local_path:"/Content/TGYC/pythonLibrary"};Object(y.c)(c).then(function(a){e=a[0],window.ue.obj.webgetdownloadprojectpath().then(function(t){var a=t.slice(0,t.length-1);i=a+e.local_path+"/"+e.local_name,n()}).catch(function(e){t.$message({message:"项目路径获取失败",type:"warning"})})}).catch(function(){t.$message({message:"运行失败",type:"warning"})})},toCloseTreeBox:function(){this.colValue=0,this.rightIconShow=!0},toOpenTreeBox:function(){this.colValue=4,this.rightIconShow=!1},toSeeIntro:function(){this.modelIntroShow=!0},toCloseIntro:function(){this.modelIntroShow=!1},searchBoard:function(){var t=this,e={name:this.searchValue,position:(this.currentPage-1)*this.pageSize,length:this.pageSize,if_get_user:0,share_ctr:n()(["0","1"]),if_page:"0"};getboard(e).then(function(e){0==e.length?(t.countNum=0,Object(c.a)()):(t.$task.arrSortForObj(e.data,"sort","desc"),e.data.forEach(function(e){if(e.board_record=null==e.board_record||""==e.board_record?[]:e.board_record,null!=e.board_record||""!=e.board_record){e.board_record.forEach(function(e){var i="",a="",n="";switch(e.is_type){case"0":case"1":case"2":case"3":i=e.id,a=t.$task.imgurl+"/assets/"+e.thum,n=e.name}e.thumid=i,e.thumthum=a,e.thumname=n});for(var i=4-e.board_record.length,a=0;a<i;a++)e.board_record.push({thumid:0,thumthum:"",thumname:""})}e.isShow=!1,e.isHeart=!1}),Number(e.count)>5?(t.boardList=e.data.slice(0,5),t.moreBoard=!0):t.boardList=e.data)})}})},D=(i("87c9"),Object(w.a)(T,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("d2-container",[i("div",[i("div",{ref:"imgBoxTopStyle",staticClass:"imgBoxTopStyle"},[i("div",[i("div",{staticClass:"topTips",staticStyle:{padding:"unset","background-color":"#252423"}},[t.rightIconShow?i("div",{staticClass:"iconSameStyle rightIconStyle",on:{click:t.toOpenTreeBox}},[i("d2-icon",{attrs:{name:"angle-double-right "}})],1):t._e(),i("el-row",[i("el-col",{staticClass:"contentTopBox",attrs:{span:t.colValue}},[0==t.rightIconShow?i("div",{staticClass:"iconSameStyle closeIconStyle",on:{click:t.toCloseTreeBox}},[i("d2-icon",{attrs:{name:"close "}})],1):t._e(),i("div",{staticClass:"imgTreeBox",style:t.treeHeight},[i("el-tree",{ref:"projectTree",staticClass:"4",attrs:{data:t.treeData,"node-key":"id","expand-on-click-node":!1,"highlight-current":!0,props:{value:"id",label:"name"}},on:{"node-click":t.treeClick}})],1)]),i("el-col",{class:t.rightIconShow?"modelTitle1":"modelTitle",attrs:{span:24-t.colValue}},[i("div",{staticStyle:{position:"relative"}},[i("el-row",["1"==t.treeClickData.id?i("el-col",{staticClass:"xuanranBoxStyle",style:t.treeHeight,attrs:{span:24}},[i("div",{staticClass:"xuanranBottomBoxStyle",style:t.treeBoxHeight2},[i("div",{staticClass:"batchAddModelBtns",staticStyle:{float:"unset","padding-top":"unset","margin-bottom":"30px"}},[t.isRander?i("el-button",{staticClass:"colorY",attrs:{size:"mini",plain:""},on:{click:function(e){return t.toSeeRanderProcess1()}}},[t._v("提交渲染")]):i("el-button",{staticClass:"colorY",attrs:{size:"mini",plain:""},on:{click:function(e){return t.toSeeRanderProcess()}}},[t._v("查看渲染进度")]),t.lookGroup?i("el-button",{staticClass:"colorC",staticStyle:{float:"right"},attrs:{size:"mini",plain:""},on:{click:function(e){return t.toSeeGroup()}}},[t._v("查看组\n                        ")]):t._e()],1),t.isRander?i("rander"):i("submitDia",{staticStyle:{"margin-top":"10px"}})],1),i("el-dialog",{staticClass:"batchUploadDialog groupCheckDia",attrs:{title:"查看组列表",visible:t.toSeeGroupShow,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(e){t.toSeeGroupShow=e}}},[i("div",{staticClass:"batchAddModelBtns",staticStyle:{float:"unset","padding-top":"unset",height:"20px"}},[i("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"20px","font-weight":"700"},on:{click:function(e){return t.toAddGruop()}}})]),i("div",{staticClass:"imgInput",staticStyle:{height:"400px","margin-top":"10px","overflow-y":"auto"}},t._l(t.groupList,function(e,a){return i("div",{key:a,staticClass:"groupItemBox"},[i("div",{staticClass:"groupItemStyle groupItemNameStyle"},[i("span",{staticStyle:{"margin-right":"5px"}},[t._v("组名:")]),0==e.isEdit?i("span",[t._v(t._s(e.name))]):i("span",{staticClass:"imgInput"},[i("el-input",{staticStyle:{width:"80%","vertical-align":"top"},attrs:{placeholder:"请输入内容",size:"mini",clearable:""},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1)]),i("div",{staticClass:"groupItemStyle groupItemSortStyle"},[i("span",{staticStyle:{"margin-right":"5px"}},[t._v("优先级:")]),0==e.isEdit?i("span",[t._v(t._s(e.sort))]):i("span",{staticClass:"imgInput"},[i("el-input",{staticStyle:{width:"60%","vertical-align":"top"},attrs:{placeholder:"排序",size:"mini",clearable:""},model:{value:e.sort,callback:function(i){t.$set(e,"sort",i)},expression:"item.sort"}})],1)]),i("div",{staticClass:"groupItemStyle",staticStyle:{"margin-left":"5px"}},[0==e.isEdit?i("span",[i("span",[i("i",{staticClass:"el-icon-edit",staticStyle:{"font-weight":"700","font-size":"15px","margin-left":"5px"},on:{click:function(i){return t.toEditGroup(e)}}})]),i("span",[i("i",{staticClass:"el-icon-delete",staticStyle:{"font-weight":"700","font-size":"15px","margin-left":"5px"},on:{click:function(i){return t.toDelGroup(e,a)}}})])]):i("span",[i("span",[i("i",{staticClass:"el-icon-circle-check",staticStyle:{"font-weight":"700","font-size":"20px","margin-left":"5px"},on:{click:function(i){return t.toAddGroupHandel(e)}}})]),i("span",[i("i",{staticClass:"el-icon-error",staticStyle:{"font-weight":"700","font-size":"20px","margin-left":"5px"},on:{click:function(i){return t.toCancleGroupHandel(a,e)}}})])])])])}),0)])],1):t._e(),"2"==t.treeClickData.id?i("el-col",{staticClass:"xuanranBoxStyle",style:t.treeHeight,attrs:{span:24}},[i("assetTool")],1):t._e()],1)],1)])],1)],1)])])])])},[],!1,null,"77b61936",null));D.options.__file="index.vue";e.default=D.exports}}]);