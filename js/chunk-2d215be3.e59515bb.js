(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d215be3"],{c000:function(t,s,a){"use strict";a.r(s);a("28a5"),a("cadf"),a("551c"),a("097d");var i=a("c276"),e=a("1684"),o={data:function(){return{softName:"",softData:{name:"",version:"",time:"",user_id:"",user_name:"",describe:""},softToolsName:"",softToolsData:{name:"",version:"",time:"",user_id:"",user_name:"",describe:""},projectDir:"",dllDir:"/Binaries/Win64",dllData:{path:"",size:"",mtime:"",state:"0",stateName:"待验证"},toolDir:"/Source/ThirdParty",toolsData:{path:"",size:"",mtime:"",state:"0",stateName:"待验证"},pluginPath:"",version:"",versionData:{},describe:"",fileData:[],toolVersion:"",toolDescribe:"",returnStr:""}},created:function(){this.softName=this.$task.softName,this.softToolsName=this.$task.softToolsName,this.getCurrentSoftware(),this.getCurrentSoftwareTool(),this.getProjectDir()},mounted:function(){},methods:{getVersionFile:function(){var t=this,s=this.projectDir+"Plugins/"+this.softName+this.dllDir+"/UnrealEditor-tgkw.dll";this.dllData.path=s,window.ue.obj.webgetfilestat(s).then(function(s){var a=JSON.parse(s);t.dllData.size=a.fsize,t.dllData.mtime=a.mtime,a.fsize>-1?(t.dllData.state="1",t.dllData.stateName="正常"):(t.dllData.state="2",t.dllData.stateName="文件异常")})},getProjectDir:function(){var t=this;window.ue.obj.webgetdownloadprojectpath().then(function(s){t.projectDir=s})},getCurrentSoftware:function(){var t=this,s={name:this.softName};Object(e.d)(s).then(function(s){t.softData=s})},getCurrentSoftwareTool:function(){var t=this,s={name:this.softToolsName};Object(e.d)(s).then(function(s){t.softToolsData=s})},getToolsFile:function(){var t=this,s=this.projectDir+"Plugins/"+this.softName+this.toolDir+"/tgycHlTools.exe";this.toolsData.path=s,window.ue.obj.webgetfilestat(s).then(function(s){var a=JSON.parse(s);t.toolsData.size=a.fsize,t.toolsData.mtime=a.mtime,a.fsize>-1?(t.toolsData.state="1",t.toolsData.stateName="正常"):(t.toolsData.state="2",t.toolsData.stateName="文件异常")})},uploadDllFile:function(){var t=this,s=this.version;if(s.split(".").length<3)this.$notify.error({title:"错误",message:"版本号错误，请正确填写",position:"bottom-right"});else if("1"==this.dllData.state){var a=this.dllData.path,o=i.a.file.getRnadomFiveInt(),l={id:a,type:"up",localPath:a,serverPath:i.a.file.diskPath+"/"+o+".dll",noDiskserverPath:"/"+o+".dll",diskId:i.a.file.diskid,successFc:function(a){!function(a){var i={software_id:t.softData.id,version:s,describe:t.describe,local_path:"/Binaries/Win64/UnrealEditor-tgkw.dll",server_path:a.noDiskserverPath,size:t.dllData.size,mtime:t.dllData.mtime,disk_id:a.diskId};Object(e.b)(i).then(function(s){t.getCurrentSoftware()})}(a)},progressFc:function(t){},failFc:function(t){}};i.a.file.addUpload(l)}else this.$notify.error({title:"错误",message:"dll文件错误，请检查后上传",position:"bottom-right"})},uploadToolsFile:function(){var t=this,s=this.toolVersion;if(s.split(".").length<3)this.$notify.error({title:"错误",message:"版本号错误，请正确填写",position:"bottom-right"});else if("1"==this.toolsData.state){var a=this.toolsData.path,o=i.a.file.getRnadomFiveInt(),l={id:a,type:"up",localPath:a,serverPath:i.a.file.diskPath+"/"+o+".exe",noDiskserverPath:"/"+o+".exe",diskId:i.a.file.diskid,successFc:function(a){!function(a){var i={software_id:t.softToolsData.id,version:s,describe:t.toolDescribe,local_path:"/Binaries/Win64/tgycHlTools.exe",server_path:a.noDiskserverPath,size:t.toolsData.size,mtime:t.toolsData.mtime,disk_id:a.diskId};Object(e.b)(i).then(function(s){t.getCurrentSoftwareTool()})}(a)},progressFc:function(t){},failFc:function(t){}};i.a.file.addUpload(l)}else this.$notify.error({title:"错误",message:"dll文件错误，请检查后上传",position:"bottom-right"})}},destroyed:function(){}},l=a("2877"),n=Object(l.a)(o,function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("d2-container",[a("div",{staticClass:"updataBox"},[a("div",{staticClass:"updataTitle"},[t._v("插件升级控制")]),a("div",{staticClass:"softBox"},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"softListBox"},[a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("插件名称：")]),t._v(" "+t._s(t.softData.name)+"\n            ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("版本号：")]),t._v(" "+t._s(t.softData.version)+"\n            ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("更新时间：")]),t._v("\n              "+t._s(t.$task.stampToDateM(t.softData.time))+"\n            ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("上传人：")]),t._v(" "+t._s(t.softData.user_name)+"\n            ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("版本描述：")]),t._v(" "+t._s(t.softData.vdescribe)+"\n            ")])]),a("div",{staticClass:"softBtns"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getVersionFile}},[t._v("验证新版本文件")]),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.uploadDllFile}},[t._v("上传新版本")])],1),a("div",{staticClass:"softDescribe"},[a("div",{staticClass:"softDescribeInput"},[a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("文件路径：")]),t._v(" "+t._s(t.dllData.path)+"\n              ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("大小：")]),t._v("\n                "+t._s(t.$task.bToConvert(t.dllData.size))+"\n              ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("最后修改时间：")]),t._v("\n                "+t._s(t.dllData.mtime)+"\n              ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("文件状态：")]),t._v("\n                "+t._s(t.dllData.stateName)+"\n              ")])]),a("div",{staticClass:"softDescribeInput"},[a("el-input",{attrs:{placeholder:"版本号"},model:{value:t.version,callback:function(s){t.version=s},expression:"version"}})],1),a("div",{staticClass:"softDescribeInput"},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"版本描述"},model:{value:t.describe,callback:function(s){t.describe=s},expression:"describe"}})],1)])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"softListBox"},[a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("插件名称：")]),t._v(" "+t._s(t.softToolsData.name)+"\n            ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("版本号：")]),t._v("\n              "+t._s(t.softToolsData.version)+"\n            ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("更新时间：")]),t._v("\n              "+t._s(t.$task.stampToDateM(t.softToolsData.time))+"\n            ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("上传人：")]),t._v("\n              "+t._s(t.softToolsData.user_name)+"\n            ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("版本描述：")]),t._v("\n              "+t._s(t.softToolsData.vdescribe)+"\n            ")])]),a("div",{staticClass:"softBtns"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getToolsFile}},[t._v("验证新版本文件")]),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.uploadToolsFile}},[t._v("上传新版本")])],1),a("div",{staticClass:"softDescribe"},[a("div",{staticClass:"softDescribeInput"},[a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("文件路径：")]),t._v(" "+t._s(t.toolsData.path)+"\n              ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("大小：")]),t._v("\n                "+t._s(t.$task.bToConvert(t.toolsData.size))+"\n              ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("最后修改时间：")]),t._v("\n                "+t._s(t.toolsData.mtime)+"\n              ")]),a("div",{staticClass:"softList"},[a("span",{staticClass:"softTip"},[t._v("文件状态：")]),t._v("\n                "+t._s(t.toolsData.stateName)+"\n              ")])]),a("div",{staticClass:"softDescribeInput"},[a("el-input",{attrs:{placeholder:"版本号"},model:{value:t.toolVersion,callback:function(s){t.toolVersion=s},expression:"toolVersion"}})],1),a("div",{staticClass:"softDescribeInput"},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"版本描述"},model:{value:t.toolDescribe,callback:function(s){t.toolDescribe=s},expression:"toolDescribe"}})],1)])])],1)],1)])])},[],!1,null,null,null);n.options.__file="index.vue";s.default=n.exports}}]);