(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5375963d"],{"42b8":function(t,e,i){"use strict";i.r(e);i("55dd");var s=i("7618"),a=i("795b"),o=i.n(a),n=(i("a481"),i("b6d0")),l=i.n(n),r=i("774e"),c=i.n(r),h=i("a34a"),d=i.n(h),u=(i("96cf"),i("3b8d")),p=i("e814"),g=i.n(p),m=(i("20d6"),i("f499")),f=i.n(m),v=(i("c5f6"),i("7f7f"),i("ac6a"),i("cebc")),w=(i("cadf"),i("551c"),i("097d"),i("310e")),b=i.n(w),_=i("d8af"),C=i("42a2"),y=i("2f62"),S=i("c276"),k=i("91b6"),x=i("7e79"),I=i("3266"),L=i("4e23"),A=i("8020"),F=i("5333"),O=i("7e3c"),j=i("5990"),B={data:function(){return{assetsImgList:[],setimgBoxForm:{thum:""},uploadFileType:"",uploadHeader:{"X-token":S.a.cookies.get("token"),"X-user-id":S.a.cookies.get("user"),"X-user-name":S.a.cookies.get("userName")},setimgBoxShow:!1,setimgBoxData:"",toCtrlClickArr:[],dataLoading:!1,defaultexpandedkeys:[],toShowLabelCloseShow:!1,selectlabelValue:[],selectlabelList:"",midselectlabelList:"",addMoreAssetsLabelShow:!1,selectOrg:{orgsid:[]},addOrMoveFlag:"",addMoreAssetsFlag:!1,setMoreAssetsFlag:!1,handleSearchShow:!1,toSetThumShow:!0,toDelBtnShow:!0,optionCircleimg:"",isTihuanMax:!0,allMidDownList:[],moreBoard:!1,boardList:[],clickModel:"",allBoardList:[],addBoardSearch:"",addBoardShow:!1,changeClassValue:"",activeColor:"baseblock",toSetSetUpShow:!1,isShowLoc:!0,isShowName:!1,menuVisible:!1,changeCnameShow:!1,toSetAssetsShow:!1,toClickArr:[],isShift:!1,isCtrl:!1,shopCardShow:!1,shopCart:[],navigationType:"",needOverHeight:0,imgVal:0,viewShow:!0,canUpload:!0,uploadLoading:!1,assetsFile:[],linkFile:[],refFileShow:!0,activeName:"first",labelValue:[],clickData:{classValue:[]},imgOneIntroShow:!1,taskId:"",consoleStr:"",Cropperbox:!1,option:{img:"",outputSize:1,full:!0,outputType:"png",canMove:!0,original:!1,canMoveBox:!1,autoCrop:!0,fixedBox:!1,info:!0,canScale:!0,fixed:!0,fixedNumber:[],high:!0},treeData:[],midtreeData:[],labelList:[],midlabelList:[],uploadImgForm:{name:"",cname:"",local_path:"",type:"",thum:"",mac_thum:"",fbx:"",ref_file:[],ref_assets:[],refAssets:[],class:[],label:[]},uploadNum:0,uploadFile:[],processLinkShow:!1,filePercentage:0,imgSameHeight:240,seeIconSize:"middle",onFetching:!1,resizeRender:null,imgList:[{isShow:!1,thum:"http://hl.tgyc.com/assets/2022-01-19/16425843587251.jpeg",name:"111"}],rowWidth:0,rowCount:0,treeMulu:[],treeDataTitle:"",toSetImgShow:!1,num:1,previewSrc:"",prviewData:"",imgwidth:"",imgheight:"",imgvalHeight:"",degleftVal:0,degrightVal:0,imgStyle:{margin:"auto",height:"100%",width:"",transform:"rotate(0deg)"},myStyle:{position:"absolute",top:"".concat(50,"%"),left:"".concat(50,"%"),height:"360px",transform:"translate(-50%, -50%)"},maskShow:!1,maskHeigth:"height:"+window.innerHeight+"px",fileCaozuoHeigth:"height:"+(window.innerHeight-160)+"px",inputStyleWidth:"width:".concat(.416*window.innerWidth-180,"px"),elmainImgHeight:"height:".concat(window.innerHeight-102,"px;"),elmaincontentHeight:"height:".concat(window.innerHeight-125,"px;"),fileBoxHeight:"height:".concat(window.innerHeight-440,"px;"),contentHeight:"height:"+(window.innerHeight-180)+"px",contentHeight1:"height:".concat(window.innerHeight-180,"px;line-height:").concat(window.innerHeight-180,"px"),treeHeight:"height:"+(window.innerHeight-80)+"px",fileFileHeigth:"height:".concat((window.innerHeight-250)/2,"px;  overflow-y: auto;"),fileFileHeigth1:"height:".concat((window.innerHeight-250)/2,"px;  overflow-y: auto;"),imgurl:"http://hl.tgyc.com",uploadImgs:[],imgSer:"".concat(this.HOST,"/index.php/home/Upload/upload"),headers:{"X-token":"".concat(S.a.cookies.get("token"))},uploadImgShow:!1,imgsArr:[],rightClickData:"",colValue:4,sliderVal:6,rightIconShow:!1,imgWidthHeight:{width:"",height:""},imgpriWidthHeight:{width:"",height:""},midallClassTree:"",modelIntroShow:!1,currentPage:1,pageSize:100,countNum:0,treeClickData:"",searchValue:"",viewerbox:null,addAsssetDialog:!1,addAssetCropperbox:!1,addAssetOptionCircleimg:"",addAssetOption:{img:"",outputSize:1,full:!1,outputType:"png",canMove:!0,original:!1,canMoveBox:!0,autoCrop:!0,fixedBox:!1,info:!0,canScale:!0,fixed:!1,high:!1,maxImgSize:100,fixedNumber:[4,3]},assetThumData:"",assetThum:{},addAssetImgList:[],addAssetData:{name:"",cname:"",type:"zprj"},assetTypeOption:[{value:"zprj",label:"zprj"},{value:"ma",label:"ma"}],assetFileList:[]}},computed:Object(v.a)({},Object(y.e)("d2admin/user",["info"])),created:function(){window.ue?(this.navigationType="ue",this.needOverHeight=60):(this.navigationType="web",this.needOverHeight=0);var t=[],e=Object(C.b)("".concat(this.info.userDetails.id).concat(this.info.userDetails.token,"l7H8avPc"));this.info.userDetails.rolepower.forEach(function(i){i.encryptionStr==e&&t.push(1)}),0==t.length&&(this.toDelBtnShow=!1);var i=[],s=Object(C.b)("".concat(this.info.userDetails.id).concat(this.info.userDetails.token,"vZpIiJoL"));this.info.userDetails.rolepower.forEach(function(t){t.encryptionStr==s&&i.push(1)}),0==i.length&&(this.toSetThumShow=!1),void 0!=this.$route.query.to?this.getOneAssets(this.$route.query.to):this.getClassImg(),this.getModelClassDown(),this.getAllLabelHandel(),this.$task.setnav("",this),this.name=this.info.userDetails.name,this.treeHeight="height:"+(window.innerHeight-80+this.needOverHeight)+"px",this.contentHeight="height:"+(window.innerHeight-180+this.needOverHeight)+"px",this.contentHeight1="height:".concat(window.innerHeight-180+this.needOverHeight,"px;line-height:").concat(window.innerHeight-180+this.needOverHeight,"px"),this.elmainImgHeight="height:".concat(window.innerHeight-102+this.needOverHeight,"px;"),this.elmaincontentHeight="height:".concat(window.innerHeight-125+this.needOverHeight-30,"px;"),this.fileBoxHeight="height:".concat(window.innerHeight-440+this.needOverHeight-30,"px;")},mounted:function(){this.watchKeyEvent(),window.addEventListener("resize",this.getHeight)},beforeDestroy:function(){},destroyed:function(){window.removeEventListener("resize",this.getHeight)},components:{VueCropper:x.VueCropper,draggable:b.a,houseAside:I.a,addAssetsDialog:L.a},watch:{$route:function(){this.taskId=this.$route.query.id},taskId:function(t,e){this.getClassImg(),this.getModelClassDown(),this.getAllLabelHandel()}},methods:Object(v.a)({},Object(y.b)("d2admin/account",["logout"]),Object(y.b)("d2admin/page",["closeAll"]),{getOneAssets:function(t){var e=this;this.imgsArr=[],this.imgList=[];var i={class_list:[],type:"6",id_list:t,position:(this.currentPage-1)*this.pageSize,length:this.pageSize};Object(F.c)(i).then(function(t){0==t.length?(e.countNum=0,e.dataLoading=!1,Object(_.a)()):(e.imgsArr=t.data,e.countNum=Number(t.count),e.dataLoading=!1,e.imgList=[],e.loadImage())})},toShareAssets:function(t){var e=[];this.imgList.forEach(function(t){t.isCheck&&e.push(t.id)}),e.push(t.id);var i=" http://hl.tgyc.com/#".concat(this.$route.path,"?to=").concat(f()(e)),s=document.createElement("input");s.value=i,document.body.appendChild(s),s.select(),document.execCommand("Copy"),this.$message({type:"success",message:"复制成功"}),document.body.removeChild(s)},setImgState:function(t){var e={};return this.$task.refineStateList.forEach(function(i){switch(t){case i.id:e={color:i.color,name:i.name}}}),e},imgOneIntroShowChange:function(t){if(this.imgOneIntroShow);else{this.imgOneIntroShow=!0;var e=document.getElementById(t.id);this.$refs.waterfall.scrollTop=e.offsetTop+10}},toCloseImgIntroChange:function(){this.imgOneIntroShow=!1,this.sliderVal=0,this.imgVal=0},dataSortChange:function(){for(var t=this,e=[],i=this.assetsImgList,s=i.length,a=0;a<s;a++){var o={id:i[a].id,sort:s-a};e.push(o)}var n=f()(e),l={json:n};Object(j.L)(l).then(function(e){t.$message({message:"修改成功",type:"success"})})},toDelAssetsImgList:function(t,e){var i=this,s={id:f()([t.id])};Object(j.n)(s).then(function(t){i.$message({type:"success",message:"删除成功"}),i.assetsImgList.splice(e,1)})},beforeUploadHandel:function(t){var e,i=t.name.slice(t.name.lastIndexOf(".")+1,t.name.length).toLowerCase();return e=t.size/1024/1024<100,this.uploadFileType=i,e||(this.$message.error("上传文件大小不能超过 100MB!"),!1)},imgupload:function(t,e,i){var s=this,a=JSON.parse(Object(C.a)(t)).data,o=e.name.slice(e.name.lastIndexOf(".")+1,e.name.length).toLowerCase(),n=a.path.slice(a.path.lastIndexOf("/")+1,a.path.length),l={assets_id:this.clickData.id,type:"1",sort:"0",file_type:o,server_name:n,server_path:a.path,disk_id:a.disk_id};Object(j.e)(l).then(function(t){var e={assets_id:s.clickData.id,disk_id:a.disk_id,disk_path:"",file_type:o,id:t,server_name:n,server_path:a.path,sort:"0",type:"1",www_path:a.www_path,thum:s.$task.imgBaseUrl+a.www_path+a.path};s.assetsImgList.push(e),s.$message({type:"success",message:"修改完成"})})},fileUploadSuccessHandel:function(t,e,i){var s=this,a=JSON.parse(Object(C.a)(t)).data;if("gif"==this.uploadFileType){this.setimgBoxForm.thum=this.$task.imgBaseUrl+a.www_path+a.path;var o=a.path.slice(a.path.lastIndexOf("/")+1,a.path.length),n={assets_id:this.clickData.id,type:"0",sort:"0",file_type:this.uploadFileType,server_name:o,server_path:a.path,disk_id:a.disk_id};Object(j.e)(n).then(function(t){if(s.$message({type:"success",message:"修改完成"}),void 0!=s.clickData.thumid&&""!=s.clickData.thumid){var e={id:f()([s.clickData.thumid])};Object(j.n)(e).then(function(e){s.clickData.thumid=t})}})}else{var l=this,r=new Image;r.setAttribute("crossOrigin","anonymous"),r.src=l.$task.imgBaseUrl+a.www_path+a.path,r.onload=function(){l.option.fixedNumber=[this.width/this.height,1],l.option.img=l.$task.imgBaseUrl+a.www_path+a.path,l.Cropperbox=!0}}},visibleChange:function(t){t&&this.$refs.select.hoverIndex<0&&(this.$refs.select.hoverIndex=0)},filterablemethod:function(t){var e=this;this.selectlabelList=this.midselectlabelList.filter(function(e){return~e.name.indexOf(t)}),setTimeout(function(){e.$refs.select.hoverIndex=0},100)},refineStateBlurChange:function(t){this.lookImgData.state=t},toJumpClassChange:function(t){this.searchValue="",this.defaultexpandedkeys=[],this.defaultexpandedkeys=[t[t.length-1].id],this.setMoreAssetsFlag=!1,this.currentPage=1,this.toClickArr=[],this.isShift=!1,this.isCtrl=!1,this.$refs.projectTree.setCurrentKey(t[t.length-1].id),this.treeClickData=t[t.length-1],this.getClassImg()},toShowLabelClose:function(){this.$task.testingJurisdiction("eZb03wSx")?this.toShowLabelCloseShow=!0:this.$notify({title:"提示",message:"没有权限",type:"warning",position:"bottom-right"})},toAddAssetsLabelHandel:function(){var t=this,e=[],i=[];if(this.selectlabelValue.forEach(function(s){var a=t.selectlabelList.findIndex(function(t){return t.id==s});a>-1?e.push(t.selectlabelList[a].id):i.push(s)}),0==i.length){var s=[];this.imgList.forEach(function(t){t.isCheck&&s.push(t.id)});var a=[];s.forEach(function(t){e.forEach(function(e){var i={label_id:e,model_id:"",action_id:"",img_id:"",assets_id:t,type:3};a.push(i)})});var o={json:f()(a)};Object(A.e)(o).then(function(e){t.$message({type:"success",message:"修改完成"}),s.forEach(function(i){var s=t.imgList.findIndex(function(t){return t.id==i});s>-1&&e.forEach(function(e){t.imgList[s].label_record.push(e)})}),t.addMoreAssetsLabelClose()})}else{var n={name:f()(i)};Object(A.d)(n).then(function(i){i.forEach(function(t){e.push(t.id)});var s=[];t.imgList.forEach(function(t){t.isCheck&&s.push(t.id)});var a=[];s.forEach(function(t){e.forEach(function(e){var i={label_id:e,model_id:"",action_id:"",img_id:"",assets_id:t,type:3};a.push(i)})});var o={json:f()(a)};Object(A.e)(o).then(function(e){t.$message({type:"success",message:"修改完成"}),s.forEach(function(i){var s=t.imgList.findIndex(function(t){return t.id==i});s>-1&&e.forEach(function(e){t.imgList[s].label_record.push(e)})}),t.addMoreAssetsLabelClose()})})}},toAddAssetsLabel:function(){if(this.$task.testingJurisdiction("x7X8CYfk")){var t=[];this.imgList.forEach(function(e){e.isCheck&&t.push(e.id)}),0!=t.length?(this.selectlabelList=JSON.parse(f()(this.labelList)),this.midselectlabelList=JSON.parse(f()(this.labelList)),this.addMoreAssetsLabelShow=!0):this.$message({type:"warning",message:"请先选择资产"})}else this.$notify({title:"提示",message:"没有权限",type:"warning",position:"bottom-right"})},treeCheckChange:function(t,e,i){e&&(this.$refs.checkprojectTree.setCheckedKeys([]),this.$refs.checkprojectTree.setCheckedKeys([t.id]))},addMoreAssetsFlagClose:function(){this.$refs.checkprojectTree.setCheckedKeys([]),this.addMoreAssetsFlag=!1},addMoreAssetsLabelClose:function(){this.addMoreAssetsLabelShow=!1,this.selectlabelValue=[]},toAddAssetsClass:function(){var t=this,e=this.$refs.checkprojectTree.getCheckedKeys();if(0!=e.length){if("add"==this.addOrMoveFlag){var i=[];this.imgList.forEach(function(t){t.isCheck&&i.push(t.id)});var s=[];if(i.forEach(function(t){var i={class_id:e[0],model_id:"",action_id:"",img_id:"",assets_id:t};s.push(i)}),0==s.length);else{var a={json:f()(s)};Object(A.c)(a).then(function(e){t.$message({type:"success",message:"修改完成"})})}}else{i=[];this.imgList.forEach(function(t){t.isCheck&&i.push(t.id)});var o=[];if(i.forEach(function(t){var i={class_id:e[0],model_id:"",action_id:"",img_id:"",assets_id:t};o.push(i)}),0==o.length);else{var n={json:f()(o)};Object(A.c)(n).then(function(e){var s={class_id:t.treeClickData.id,type:"4",id_list:f()(i)};Object(j.s)(s).then(function(e){t.$message({type:"success",message:"修改完成"}),i.forEach(function(e){var i=t.imgList.findIndex(function(t){return t.id==e});i>-1&&t.imgList.splice(i,1)})})})}}this.addMoreAssetsFlagClose()}else this.$message({type:"warning",message:"请先勾选分类"})},toSetMoreAssets:function(){this.$task.testingJurisdiction("eZb03wSx")?this.setMoreAssetsFlag=!0:this.$notify({title:"提示",message:"没有权限",type:"warning",position:"bottom-right"})},toGetMoreAssets:function(){this.setMoreAssetsFlag=!1},toAddMoreAssets:function(t){if(this.$task.testingJurisdiction("98yN7s1R")){var e=[];this.imgList.forEach(function(t){t.isCheck&&e.push(t.id)}),0!=e.length?(this.addMoreAssetsFlag=!0,this.addOrMoveFlag=t):this.$message({type:"warning",message:"请先选择资产"})}else this.$notify({title:"提示",message:"没有权限",type:"warning",position:"bottom-right"})},toDelMoreAssets:function(){var t=this;if(this.$task.testingJurisdiction("oOMnUPcz")){var e=[];this.imgList.forEach(function(t){t.isCheck&&e.push(t.id)}),0!=e.length?this.$confirm("确认移除该分类下的资产？").then(function(e){var i=[];if(t.imgList.forEach(function(t){t.isCheck&&i.push(t.id)}),0!=i.length){var s={class_id:t.treeClickData.id,type:"4",id_list:f()(i)};Object(j.s)(s).then(function(e){t.$message({type:"success",message:"删除成功"}),i.forEach(function(e){var i=t.imgList.findIndex(function(t){return t.id==e});i>-1&&t.imgList.splice(i,1)})})}else t.$message({type:"warning",message:"请先勾选资产"})}).catch(function(t){}):this.$message({type:"warning",message:"请先选择资产"})}else this.$notify({title:"提示",message:"没有权限",type:"warning",position:"bottom-right"})},setimgBoxShowClose:function(){this.setimgBoxForm.thum="",this.assetsImgList=[],this.uploadFileType="",this.setimgBoxShow=!1},toSetAssetsThum:function(t){this.setimgBoxForm.thum=t.mac_thum,this.setimgBoxShow=!0},toLookMoreShare:function(){this.$router.push({path:"/drawBoard",query:{type:"share",keyword:this.searchValue}})},toClickImg:function(t){this.$router.push({path:"/details",query:{id:t.id,type:"my",isShare:t.share_ctr}})},getAllboard:function(){var t=this,e={user_id:f()([this.info.userDetails.id]),name:this.addBoardSearch,share_ctr:f()(["0","1"]),if_page:"1"};Object(j.D)(e).then(function(e){0==e.length?t.allBoardList=[]:t.allBoardList=e.data})},submitForm:function(t){var e=this,i={drawing_board_id:t.id,model_id:"",assets_id:this.clickModel.id,img_id:"",action_id:""};Object(j.h)(i).then(function(t){e.$message({type:"success",message:"添加成功"}),e.addBoardShow=!1})},toAddCreatedBoard:function(){var t=this;if(""!=this.addBoardSearch&&null!=this.addBoardSearch){var e={name:this.addBoardSearch,share_ctr:0,sort:0};Object(j.f)(e).then(function(e){var i=g()((new Date).getTime()/1e3),s={id:e,name:t.addBoardSearch,share_ctr:0,sort:0,add_time:i,user_id:t.info.userDetails.name,follow_num:0,share_num:0};t.allBoardList.push(s),t.$message({type:"success",message:"添加成功"})})}else this.$message({type:"warning",message:"请先输入名称"})},toAddMyBoard:function(t){this.clickModel=t,this.addBoardShow=!0,this.getAllboard()},toArriveBoard:function(t){"my"==t?this.$router.push({path:"/drawBoard"}):this.$router.push({path:"/flow"})},logOff:function(){this.logout({vm:this,confirm:!0})},ChangePassword:function(){this.$router.push({path:"/all/password"})},lookData:function(){this.$router.push({path:"/comintro"})},toChangeColor:function(t){switch(this.activeColor=t,t){case"baseblock":this.changeClassValue="";break;case"yellowblock":this.changeClassValue="yellowColor";break;case"buleBlock":this.changeClassValue="blueColor"}},toSetSetUp:function(){this.toSetSetUpShow=!0},isShowLocchange:function(t){},isShowNamechange:function(t){},addAssetDownLog:function(t){var e=[];t.forEach(function(t){e.push({type:4,model_id:"",action_id:"",img_id:"",assets_id:t})});var i={json:f()(e)};Object(F.a)(i).then(function(t){})},toDownSelectAssetsAndCurrent:function(t){var e=[];if(t.isCheck){this.imgList.forEach(function(t){1==t.isCheck&&e.push(t.id)});var i=t.id;-1==e.indexOf(i)&&e.push(i)}else{i=t.id;e.push(i)}this.downAssetsFc(e,!1)},toDownSelectAssets:function(t){var e=[];this.imgList.forEach(function(t){1==t.isCheck&&e.push(t.id)}),this.downAssetsFc(e,t)},downAssetsFc:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s="",a=0,o=0;this.addAssetDownLog(t);var n=function(t){for(var e=0;e<t.length;e++)l(t[e])},l=function(t){var o=t.local_path;t.allPath=s+t.local_path,window.ue.obj.webgetfilestat(t.allPath).then(function(s){var n=JSON.parse(s);if(0==n.fsize)c(t);else if(e.$task.isDownAsset(o))if(i)r(t);else{var l=g()(t.mtime);n.mtime_tamp!=l?c(t):(a--,h())}else a--,h()})},r=function(t){var e=t.local_path;e="/Game"+(e=(e=e.slice(0,e.lastIndexOf("."))).slice(e.indexOf("/"),e.length)),t.pakagesName=e,window.ue.obj.unloadpackages(e).then(function(e){var i=t.allPath;window.ue.obj.webdelfile(i).then(function(e){t.reloadpackages=!0,c(t)})})},c=function(t){var e=1==t.reloadpackages,i=t.pakagesName,o={name:t.name,size:t.size,id:s+t.local_path,type:"down",localPath:s+t.local_path,serverPath:t.disk_path+t.server_path,nodisk_path:t.local_path,reloadpackages:e,pakagesName:i,successFc:function(t){a--,h(),t.reloadpackages&&window.ue.obj.reloadpackages(t.pakagesName).then(function(t){})},progressFc:function(t){},failFc:function(t){}};S.a.file.addDownList(o)},h=function(){if(a<=0)for(var i=0;i<t.length;i++){(n=e.imgList.findIndex(function(e){return e.id==t[i]}))>-1&&(e.imgList[n].showProcess=!1,e.imgList[n].isLocFileShow=!0)}else{var s=o-a;for(i=0;i<t.length;i++){var n;(n=e.imgList.findIndex(function(e){return e.id==t[i]}))>-1&&(e.imgList[n].process=s)}}e.imgList.splice()},p=function(i){o=i,a=i;for(var s=0;s<t.length;s++){var n=e.imgList.findIndex(function(e){return e.id==t[s]});n>-1&&(e.imgList[n].showProcess=!0,e.imgList[n].count=a)}e.imgList.splice()};window.ue.obj.webgetdownloadprojectpath().then(function(e){s=e;var i={assets_id:f()(t)};Object(j.H)(i).then(function(){var t=Object(u.a)(d.a.mark(function t(e){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:p(e.length),n(e);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())})},toOpanLocation:function(t){var e="/Game"+t.local_path.slice(t.local_path.indexOf("/"),t.local_path.length)+"/"+t.name;window.ue.obj.webopenpath(e).then(function(t){})},toDeleleAssets:function(t){var e=this;this.$confirm("确认删除当前资产？").then(function(i){var s=[];e.imgList.forEach(function(t){1==t.isCheck&&s.push(t.id)}),s.push(t.id);var a=c()(new l.a(s)),o={id_list:f()(a)};Object(j.l)(o).then(function(t){e.$message({type:"success",message:"删除成功"}),a.forEach(function(t){var i=e.imgList.findIndex(function(e){return e.id==t});-1!=i&&e.imgList.splice(i,1)})})}).catch(function(t){})},rightClick:function(t,e,i){this.rightClickData=e,e.isCheck||(this.imgList.forEach(function(t,e){t.isCheck=!1}),e.isCheck=!0),this.menuVisible=!1,this.menuVisible=!0,document.addEventListener("click",this.foo),"ue"==this.navigationType?(this.$refs.menuList.style.left=t.clientX-350+"px",this.$refs.menuList.style.top=t.clientY-70+"px"):(this.$refs.menuList.style.left=t.clientX-300+"px",this.$refs.menuList.style.top=t.clientY-100+"px")},foo:function(){this.menuVisible=!1,document.removeEventListener("click",this.foo)},changeCnameBlur:function(t){var e=this;if(null==this.clickData.cname||""==this.clickData.cname);else{var i={id:this.clickData.id,cname:this.clickData.cname};Object(j.J)(i).then(function(t){e.$message({type:"success",message:"修改成功"})})}},changeClassNameBlur:function(t){var e=this,i=[];this.clickData.classValue.forEach(function(t){i.push(t[t.length-1])});var s=[];if(i.forEach(function(t){var i={class_id:t,model_id:"",action_id:"",img_id:"",assets_id:e.clickData.id};s.push(i)}),0==s.length);else{var a={json:f()(s)};Object(A.c)(a).then(function(t){e.$message({type:"success",message:"修改完成"})})}},changeLableBlur:function(t){var e=this,i=[];if(this.labelValue.forEach(function(t){var s={label_id:t,model_id:"",action_id:"",img_id:"",assets_id:e.clickData.id,type:3};i.push(s)}),0==i.length);else{var s={json:f()(i)};Object(A.e)(s).then(function(t){e.$message({type:"success",message:"修改完成"})})}},toSetClickData:function(){var t=this;this.clickData.classValue=[],this.labelValue=[];var e=JSON.parse(f()(this.midallClassTree));this.clickData.class_list.forEach(function(t){e.forEach(function(e){t.class_id==e.id&&(e.disabled=!0)})});var i=this,s=[];e.forEach(function(a){"0"==a.prid&&(a.children=function t(s){var a=[];return e.forEach(function(e){e.prid==s.id&&(a.push(e),e.children=t(e),0!=e.children.length&&i.$task.arrSortForObj(e.children,"sort","desc"))}),a}(a),0==a.children.length||t.$task.arrSortForObj(a.children,"sort","desc"),s.push(a),0==s.length||t.$task.arrSortForObj(s,"sort","desc"))}),this.midtreeData=s,this.midlabelList=this.labelList,this.clickData.label_list.forEach(function(e){t.midlabelList.forEach(function(t){e.label_id==t.id&&(t.disabled=!0)})}),this.changeCnameShow=!0},watchKeyEvent:function(){var t=this,e="",i="";window.ue?(e=160,i=162):(e=16,i=17);var s=function(s,a){switch(s){case e:1==a?t.isShift=!0:(t.toClickArr=[],t.isShift=!1);break;case i:1==a?t.isCtrl=!0:(t.toClickArr=[],t.isCtrl=!1)}};document.onkeydown=function(t){s(t.keyCode,!0)},document.onkeyup=function(t){s(t.keyCode,!1)}},toDelShopCart:function(t){this.shopCart.splice(t,1)},toAddShopCard:function(t){var e=this;this.imgList.forEach(function(t){if(1==t.isCheck||1==t.isShow){-1==e.shopCart.findIndex(function(e){return e.id==t.id})&&e.shopCart.push(t)}})},toDownMore:function(){var t=this,e=[],i=[];this.shopCart.forEach(function(t){e.push(t.id),i.push({type:4,model_id:"",action_id:"",img_id:"",assets_id:t.id})});var s={json:f()(i)};Object(F.a)(s).then(function(t){}),S.a.file.uploadWay="more",window.ue.obj.webgetdownloadprojectpath().then(function(i){var s=i,a={assets_id:f()(e)};Object(j.H)(a).then(function(){var e=Object(u.a)(d.a.mark(function e(i){var a,o,n,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=d.a.mark(function e(a){var o,r,c,h;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=i[a],e.next=3,t.getLocationFile1(o);case 3:e.t0=e.sent,e.t1=o.name,e.t2=o.size,e.t3=s+o.local_path,e.t4=s+o.local_path,e.t5=o.local_path,e.t6=o.disk_path+o.server_path,e.t7=o.local_path,e.t8=function(t){n(t)},e.t9=function(t){},e.t10=function(t){l(t)},(r={isLocFileShow:e.t0,name:e.t1,size:e.t2,id:e.t3,type:"down",localPath:e.t4,loclocal_path:e.t5,serverPath:e.t6,nodisk_path:e.t7,successFc:e.t8,progressFc:e.t9,failFc:e.t10}).isLocFileShow?-1!=r.loclocal_path.indexOf("Content/Asset/Module/A_Materials/")||(c=function(t){t.id,r.id},-1==S.a.file.downList.findIndex(c)&&-1==S.a.file.downHistroy.findIndex(c)?S.a.file.addDownList(r):S.a.file.downList[S.a.file.downList.findIndex(c)].successFc(r)):(h=function(t){t.id,r.id},-1==S.a.file.downList.findIndex(h)&&-1==S.a.file.downHistroy.findIndex(h)?S.a.file.addDownList(r):S.a.file.downList[S.a.file.downList.findIndex(h)].successFc(r)),n=function(t){},function(t){},l=function(t){};case 19:case"end":return e.stop()}},e,this)}),o=0;case 2:if(!(o<i.length)){e.next=7;break}return e.delegateYield(a(o),"t0",4);case 4:o++,e.next=2;break;case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())})},toDownAssets:function(t){var e=this;if("已连接"==S.a.file.linkState){t.process=0,t.successNum=0;var i=[],s=[];this.imgList.forEach(function(t){1==t.isCheck&&i.push(t),1==t.isShow&&s.push(t)});var a=[];if(0==s.length)a=i;else{a=-1!=i.findIndex(function(t){return t.id==s[0].id})?i:s}if(S.a.file.uploadWay="more",1==a.length&&0!=a.length)t.process=1,window.ue.obj.webgetdownloadprojectpath().then(function(i){var s=i,a=[];a.push({type:4,model_id:"",action_id:"",img_id:"",assets_id:t.id});var o={json:f()(a)};Object(F.a)(o).then(function(t){});var n={assets_id:f()([t.id])};Object(j.H)(n).then(function(){var i=Object(u.a)(d.a.mark(function i(a){var o,n,l,r,c,h,u,p;return d.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:o=[],n=0;case 2:if(!(n<a.length)){i.next=19;break}if(-1==(l=a[n]).local_path.indexOf("Content/Asset/Module/A_Materials/")){i.next=14;break}return i.next=7,e.getLocationFile1(l);case 7:if(!i.sent){i.next=10;break}i.next=12;break;case 10:l.id=s+l.local_path,o.push(l);case 12:i.next=16;break;case 14:l.id=s+l.local_path,o.push(l);case 16:n++,i.next=2;break;case 19:r=[],o.forEach(function(t){-1==e.allMidDownList.findIndex(function(e){return e.id==t.id})&&r.push(t)}),c=d.a.mark(function i(a){var o,n,l,c;return d.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return function(t){t.id,o.id},o=r[a],i.next=4,e.getLocationFile1(o);case 4:i.t0=i.sent,i.t1=t.id,i.t2=o.name,i.t3=o.size,i.t4=s+o.local_path,i.t5=s+o.local_path,i.t6=o.disk_path+o.server_path,i.t7=o.local_path,i.t8=function(t){u(t)},i.t9=function(t){},i.t10=function(t){p(t)},n={isLocFileShow:i.t0,assetsid:i.t1,name:i.t2,size:i.t3,id:i.t4,type:"down",localPath:i.t5,serverPath:i.t6,nodisk_path:i.t7,successFc:i.t8,progressFc:i.t9,failFc:i.t10},u=function(t){var i=e.imgList.findIndex(function(e){return e.id==t.assetsid});-1!=i&&(e.imgList[i].successNum++,e.imgList[i].process=Math.floor(e.imgList[i].successNum/r.length*100),100==e.imgList[i].process&&(e.imgList[i].isLocFileShow=!0,e.imgList[i].isCheck=!1))},function(t){},p=function(t){function i(e){e.id,t.id}-1!=e.allMidDownList.findIndex(i)&&e.allMidDownList.splice(e.allMidDownList.findIndex(i),1)},n.isLocFileShow?-1!=n.localPath.indexOf("Content/Asset/Module/A_Materials/")||(l=function(t){t.id,n.id},-1==e.allMidDownList.findIndex(l)&&e.allMidDownList.push(n),S.a.file.addDownList(n,r.length)):(c=function(t){t.id,n.id},-1==e.allMidDownList.findIndex(c)&&e.allMidDownList.push(n),S.a.file.addDownList(n,r.length));case 20:case"end":return i.stop()}},i,this)}),h=0;case 25:if(!(h<r.length)){i.next=30;break}return i.delegateYield(c(h),"t0",27);case 27:h++,i.next=25;break;case 30:case"end":return i.stop()}},i,this)}));return function(t){return i.apply(this,arguments)}}())});else{var o=[];a.forEach(function(t){o.push(t.id)});var n=[];o.forEach(function(t){n.push({type:4,model_id:"",action_id:"",img_id:"",assets_id:t})});var l={json:f()(n)};Object(F.a)(l).then(function(t){}),window.ue.obj.webgetdownloadprojectpath().then(function(t){var i=t,s={assets_id:f()(o)};Object(j.H)(s).then(function(){var t=Object(u.a)(d.a.mark(function t(s){var a,o,n,l,r,c,h;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[],o=0;case 4:if(!(o<s.length)){t.next=26;break}return n=s[o],t.next=8,e.getLocationFile1(n);case 8:t.t0=t.sent,t.t1=n.name,t.t2=n.size,t.t3=i+n.local_path,t.t4=i+n.local_path,t.t5=n.disk_path+n.server_path,t.t6=n.local_path,t.t7=function(t){r(t)},t.t8=function(t){c(t)},t.t9=function(t){h(t)},l={isLocFileShow:t.t0,name:t.t1,size:t.t2,id:t.t3,type:"down",localPath:t.t4,serverPath:t.t5,nodisk_path:t.t6,successFc:t.t7,progressFc:t.t8,failFc:t.t9},r=function(t){},c=function(t){},h=function(t){},l.isLocFileShow&&-1!=l.localPath.indexOf("Content/Asset/Module/A_Materials/")||a.push(l);case 23:o++,t.next=4;break;case 26:a.forEach(function(t){S.a.file.addDownList(t,a.length)});case 27:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())})}}else this.$message({message:"脚本检验失败",type:"warning"})},toBatchAddModelBox:function(){this.$router.replace("/all/batchAdd")},fileImgWidth:function(){},bToConvert:function(t){var e=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,e)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e]},getAssets_file:function(t,e){var i=this,s={path_list:f()(t)};Object(j.v)(s).then(function(t){e.forEach(function(e){var s=t.findIndex(function(t){return t.local_path==e.nodisk_path});if(-1==s){var a={id:e.local_path,type:"up",localPath:e.local_path,serverPath:"".concat(S.a.file.diskPath,"/").concat(S.a.file.getRnadomFiveInt(),".").concat(e.type),uploadFun:function(t){var s=i.uploadImgForm.reffileList.findIndex(function(e){return e.id==t.localPath});if(-1!=s){i.refFileShow=!1,i.$set(i.uploadImgForm.reffileList[s],"state",t.state),i.$set(i.uploadImgForm.reffileList[s],"process",t.upLoadProgress),i.uploadImgForm.reffileList[s].state=t.state,i.uploadImgForm.reffileList[s].process=t.upLoadProgress,i.refFileShow=!0;var a={add_list:f()([{name:e.name,local_path:e.nodisk_path,server_path:"/".concat(S.a.file.getRnadomFiveInt(),".").concat(e.type),size:e.size,mtime:e.mtime,type:e.type,disk_id:S.a.file.diskid}])};Object(j.b)(a).then(function(t){i.uploadImgForm.reffileList[s].backId=t[0];var e=[];i.uploadImgForm.reffileList.forEach(function(t){"完成"!=t.state&&"无需更新"!=t.state||e.push(t)}),e.length==i.uploadImgForm.reffileList.length?i.fileUplaodSuccess():i.uploadLoading=!0})}}};S.a.file.uploadWay="one",S.a.file.addUpload(a)}else if(e.mtime==t[s].mtime){i.uploadImgForm.reffileList.forEach(function(e){e.name==t[s].local_path&&(e.backId=t[s].id,i.refFileShow=!1,e.state="无需更新",i.$set(e,"state","无需更新"),i.refFileShow=!0)});var o=[];if(i.uploadImgForm.reffileList.forEach(function(t){"完成"!=t.state&&"无需更新"!=t.state||o.push(t)}),o.length!=i.uploadImgForm.reffileList.length)return void(i.uploadLoading=!0);i.fileUplaodSuccess()}else{var n={id:e.local_path,type:"up",localPath:e.local_path,serverPath:"".concat(S.a.file.diskPath,"/").concat(S.a.file.getRnadomFiveInt(),".").concat(e.type),uploadFun:function(a){var o=i.uploadImgForm.reffileList.findIndex(function(t){return t.id==a.localPath});if(-1!=o){i.refFileShow=!1,i.$set(i.uploadImgForm.reffileList[o],"state",a.state),i.$set(i.uploadImgForm.reffileList[o],"process",a.upLoadProgress),i.uploadImgForm.reffileList[o].state=a.state,i.uploadImgForm.reffileList[o].process=a.upLoadProgress,i.refFileShow=!0;var n={add_list:f()([{assets_file_id:t[s].id,server_path:"/".concat(S.a.file.getRnadomFiveInt(),".").concat(e.type),size:e.size,mtime:e.mtime,disk_id:S.a.file.diskid}])};Object(j.b)(n).then(function(t){i.uploadImgForm.reffileList[o].backId=t[0];var e=[];i.uploadImgForm.reffileList.forEach(function(t){"完成"!=t.state&&"无需更新"!=t.state||e.push(t)}),e.length==i.uploadImgForm.reffileList.length?i.fileUplaodSuccess():i.uploadLoading=!0})}}};S.a.file.uploadWay="one",S.a.file.addUpload(n)}})})},fileUplaodSuccess:function(){var t=Object(u.a)(d.a.mark(function t(){var e,i,s,a,o=this;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=this.uploadImgForm.class.length&&""!=this.uploadImgForm.thum){t.next=3;break}return this.$message({type:"warning",message:"分类和缩略图不能为空"}),t.abrupt("return");case 3:return e=[],i=[],s=[],this.uploadImgForm.reffileList.forEach(function(t){i.push(t.backId)}),this.uploadImgForm.refAssets.forEach(function(t){s.push(t.id)}),this.uploadImgForm.class.forEach(function(t){e.push(t[t.length-1])}),t.t0=this.uploadImgForm.name,t.t1=this.uploadImgForm.cname,t.t2=this.uploadImgForm.local_path,t.t3=this.uploadImgForm.type,t.next=19,this.serverImgPath(this.uploadImgForm.thum);case 19:return t.t4=t.sent,t.next=22,this.serverImgPath(this.uploadImgForm.mac_thum);case 22:t.t5=t.sent,t.t6=this.uploadImgForm.fbx,t.t7=f()(i),t.t8=f()(s),t.t9=f()(e),t.t10=f()(this.uploadImgForm.label),a={name:t.t0,cname:t.t1,local_path:t.t2,type:t.t3,thum:t.t4,mac_thum:t.t5,fbx:t.t6,ref_file:t.t7,ref_assets:t.t8,class:t.t9,label:t.t10},Object(j.a)(a).then(function(t){o.$message({type:"success",message:"上传成功"}),o.uploadLoading=!1,o.getClassImg(),o.toCancalUpload()});case 31:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),watchFileUpload:function(t){},toSendFile:function(){S.a.file.addUpload({localPath:"K:/testProject/UE5/Project/Content/Asset/Module/Building/Mesh/FarmTools/SM_Building_FarmTools_030.uasset",serverPath:"/mnt/tgyc/hlAssets/2022-6-23/16559729669aJqy.uasset",type:"up"}),S.a.file.addDown("",function(t){})},compressImg:function(t,e){Object(_.b)();return new o.a(function(i,s){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.src=t,a.onload=function(){var s=this.width/this.height,a=this.width>700?700:this.width,o=this.width>700?700/s:this.height,n=document.createElement("canvas");n.setAttribute("ref","E".concat(e));var l,r=n.getContext("2d");n.setAttribute("width",a),n.setAttribute("height",o),r.clearRect(0,0,a,o),r.drawImage(this,0,0,a,o),l=n.toDataURL(t.type),Object(_.a)(),i(l)}})},getbase64Img:function(t){return new o.a(function(e,i){var s={img:t};Object(k.b)(s).then(function(t){e(t)})})},queren:function(){var t=this;this.$refs.cropper.getCropData(function(){var e=Object(u.a)(d.a.mark(function e(i){var s,a,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getbase64Img(i);case 2:s=e.sent,t.setimgBoxForm.thum=t.$task.imgBaseUrl+s.www_path+s.path,a=s.path.slice(s.path.lastIndexOf("/")+1,s.path.length),o={assets_id:t.clickData.id,type:"0",sort:"0",file_type:t.uploadFileType,server_name:a,server_path:s.path,disk_id:s.disk_id},Object(j.e)(o).then(function(e){if(t.$message({type:"success",message:"修改完成"}),void 0!=t.clickData.thumid&&""!=t.clickData.thumid){var i={id:f()([t.clickData.thumid])};Object(j.n)(i).then(function(i){t.clickData.thumid=e,t.optionCircleimg="",t.Cropperbox=!1})}});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},uploadImg:function(t){var e=this,i=t.target.files[0];if(!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(t.target.value))return alert("图片类型必须是.gif,jpeg,jpg,png,bmp中的一种"),!1;var a=new FileReader;a.onload=function(t){var a,o,n,l;a="object"===Object(s.a)(t.target.result)?window.URL.createObjectURL(new Blob([t.target.result])):t.target.result,o=i,n=function(t){var i=new Image;i.setAttribute("crossOrigin","anonymous"),i.src=t,i.onload=function(){e.option.fixedNumber=[this.width/this.height,1],e.optionCircleimg=t,e.option.img=a}},(l=new FileReader).readAsDataURL(o),l.onload=function(t){n(t.target.result)}},a.readAsArrayBuffer(i)},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},toScreenShot:function(){var t=this;window.ue.obj.webstartscreenshot().then(function(e){var i=0,s=setInterval(function(){i++,window.ue.obj.webgetfilestat(e).then(function(i){var a=JSON.parse(i);if(0!=a.mtime)return clearInterval(s),void t.getImgBase64(e)}).catch(function(){}),10==i&&(clearInterval(s),t.$message({type:"warning",message:"拍屏失败"}))},1e3)}).catch(function(){})},getImgBase64:function(t){var e=this;window.ue.obj.webgetimgbase64(t).then(function(t){e.consoleStr="转为base64";var i="data:image/png;base64,"+t;e.option.img=i,e.Cropperbox=!0}).catch(function(){})},toUploadFileDia:function(){this.Cropperbox=!0},toCancalUpload:function(){this.uploadImgShow=!1,this.option.img="",this.canUpload=!0,this.uploadImgForm.name="",this.uploadImgForm.cname="",this.uploadImgForm.local_path="",this.uploadImgForm.type="",this.uploadImgForm.thum="",this.uploadImgForm.mac_thum="",this.uploadImgForm.fbx="",this.uploadImgForm.ref_file=[],this.uploadImgForm.reffileList=[],this.uploadImgForm.ref_assets=[],this.uploadImgForm.class=[],this.uploadImgForm.label=[]},serverImgPath:function(t){return new o.a(function(e,i){var s={img:t};Object(k.a)(s).then(function(t){e(t)}).catch(function(t){})})},locFileData:function(t){return new o.a(function(e,i){window.ue.obj.webgetfilestat(t).then(function(t){var i=JSON.parse(t);e(i)}).catch(function(){})})},toReGetData:function(){this.imgWidthHeight.width="",this.imgWidthHeight.height="",this.uploadImgForm.name="",this.uploadImgForm.cname="",this.uploadImgForm.local_path="",this.uploadImgForm.type="",this.uploadImgForm.thum="",this.uploadImgForm.mac_thum="",this.uploadImgForm.fbx="",this.uploadImgForm.ref_file=[],this.uploadImgForm.reffileList=[],this.uploadImgForm.ref_assets=[],this.uploadImgForm.class=[],this.uploadImgForm.label=[],this.toOpenImgBox()},toUploadAssets:function(){var t=this;this.uploadLoading=!0;var e=[],i=this;function s(){return(s=Object(u.a)(d.a.mark(function t(){var s,a,o,n,l,r,c;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s=0;case 1:if(!(s<i.uploadImgForm.ref_file.length)){t.next=16;break}return a=i.uploadImgForm.ref_file[s],o=a.slice(a.lastIndexOf(".")+1,a.length),n=a.slice(a.lastIndexOf("/")+1,a.length),l=a.slice(0,a.lastIndexOf("/")-1),t.next=8,i.locFileData(i.uploadImgForm.contentpath+a);case 8:return r=t.sent,t.next=11,i.locFileData(i.uploadImgForm.contentpath+a);case 11:c=t.sent,e.push({id:i.uploadImgForm.contentpath+a,name:n,assetsPath:l,local_path:i.uploadImgForm.contentpath+a,nodisk_path:a,server_path:"",size:r.fsize,mtime:c.mtime,type:o});case 13:s++,t.next=1;break;case 16:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}(function(){return s.apply(this,arguments)})().then(function(i){var s=[];e.forEach(function(t){0==t.mtime&&s.push(t)}),0==s.length?t.getAssets_file(t.uploadImgForm.ref_file,e):t.$message({type:"warning",message:"文件有缺失,请检查后重新上传"})})},get_assetsId:function(t){var e=this,i=[];t.forEach(function(t){i.push({name:t.name,local_path:t.path})});var s={assets_list:f()(i)};Object(j.u)(s).then(function(t){i.forEach(function(i){var s=t.findIndex(function(t){return t.name==i.name&&t.local_path==i.local_path});-1==s?(i.state="请先上传该文件",e.canUpload=!1):i.id=t[s].id}),e.uploadImgForm.refAssets=i})},getModelClassDown:function(){var t=this;Object(O.k)({type:"4"}).then(function(e){t.midallClassTree=JSON.parse(f()(e));var i=[];e.forEach(function(e){"0"==e.prid&&(e.children=t.getParame(e),0==e.children.length||t.$task.arrSortForObj(e.children,"sort","desc"),i.push(e),0==i.length||t.$task.arrSortForObj(i,"sort","desc"))}),t.treeData=i})},getParame:function(t){var e=this,i=[];return this.midallClassTree.forEach(function(s){s.prid==t.id&&(i.push(s),s.children=e.getParame(s),0!=s.children.length&&e.$task.arrSortForObj(s.children,"sort","desc"))}),i},getHeight:function(){this.maskHeigth="height:"+window.innerHeight+"px",this.fileCaozuoHeigth="height:"+(window.innerHeight-160)+"px",this.inputStyleWidth="width:".concat(.416*window.innerWidth-180,"px"),this.fileFileHeigth="height:".concat((window.innerHeight-250)/2,"px;  overflow-y: auto;"),this.fileFileHeigth1="height:".concat((window.innerHeight-250)/2,"px;  overflow-y: auto;"),this.treeHeight="height:"+(window.innerHeight-80+this.needOverHeight)+"px",this.contentHeight="height:"+(window.innerHeight-180+this.needOverHeight)+"px",this.elmainImgHeight="height:".concat(window.innerHeight-102+this.needOverHeight,"px;"),this.elmaincontentHeight="height:".concat(window.innerHeight-125+this.needOverHeight-30,"px;"),this.fileBoxHeight="height:".concat(window.innerHeight-440+this.needOverHeight-30,"px;")},handFileChange:function(t,e){var i=document.getElementsByClassName("uploadfile");if(i&&i.length>0){var s=i[0].getElementsByTagName("input");s&&s.length>0&&s[0].files&&s[0].files.length>0&&(this.uploadNum=s[0].files.length)}},handelProgress:function(t,e,i){},setTimeStamp:function(t){if(null==t||""==t||0==t)return"--";var e=new Date;return e.setTime(1e3*t),e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()},setTime:function(t){if(null==t||""==t||0==t)return"--";var e=new Date;return e.setTime(1e3*t),e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+"/"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},handleChange:function(t){this.seeIconSize=t,"big"==t&&(this.imgSameHeight=360),"middle"==t&&(this.imgSameHeight=240),"small"==t&&(this.imgSameHeight=120)},toUploadImgIntro:function(){var t=this,e=[],i=[];if(void 0!=this.prviewData.labellist&&0==this.prviewData.labellist.length){this.prviewData.labellist.forEach(function(i){var s={label_id:i,model_id:"",action_id:"",img_id:t.prviewData.id,type:3};e.push(s)});var s={json:f()(e)};Object(A.e)(s).then(function(e){e.forEach(function(e){t.prviewData.labellist.push(e.label_id),t.prviewData.label_record.push(e)}),t.$message({type:"success",message:"修改完成"}),t.toSetImgShow=!1})}if(void 0!=this.prviewData.classlist&&0==this.prviewData.classlist.length){this.prviewData.classlist.forEach(function(e){var s={class_id:e[e.length-1],model_id:"",action_id:"",img_id:t.prviewData.id};i.push(s)});var a={json:f()(i)};Object(A.c)(a).then(function(e){e.forEach(function(e){t.prviewData.classlist.push(e.label_id),t.prviewData.class_record.push(e)}),t.$message({type:"success",message:"修改完成"}),t.toSetImgShow=!1})}var o={id:this.prviewData.id,name:this.prviewData.name};Object(A.l)(o).then(function(e){t.$message({type:"success",message:"修改完成"}),t.toSetImgShow=!1})},imgMouseOver:function(t){t.isShow=!0,this.$forceUpdate()},imgMouseLeave:function(t){t.isShow=!1,this.$forceUpdate()},boardMouseOver:function(t){t.isShow=!0,this.$forceUpdate()},boardMouseLeave:function(t){t.isShow=!1,this.$forceUpdate()},shopMouseLeave:function(){this.shopCardShow=!1},toDelClass:function(t,e){var i=[e.class_record[t].id],s={id:f()(i)};Object(A.f)(s).then(function(i){e.class_record.splice(t,1)})},toDelLabel:function(t,e){var i=[e.label_record[t].id],s={id:f()(i)};Object(A.h)(s).then(function(i){e.label_record.splice(t,1),e.label_list.splice(t,1)})},toDelClass1:function(t,e,i){var s=this;if(this.$task.testingJurisdiction("XrmHj4uD")){var a=[];a.push(this.clickData.id);e[e.length-1].id;var o={class_id:e[e.length-1].id,type:"4",id_list:f()(a)};Object(j.s)(o).then(function(e){s.$message({type:"success",message:"修改完成"}),i.class_list.splice(t,1)})}else this.$notify({title:"提示",message:"没有权限",type:"warning",position:"bottom-right"})},toDelLabel1:function(t,e,i){var s=[];s.push(this.clickData.id);var a={label_id:e.id,type:"3",id_list:f()(s)};Object(j.t)(a).then(function(e){i.label_list.splice(t,1)})},toLookSourceImg:function(t,e){var i=this;if(1==this.isCtrl){t.isCheck=!t.isCheck,this.toCtrlClickArr=[];var s={data:t,index:e};this.toCtrlClickArr.push(s)}else if(1==this.isShift){var a=[];if(0!=this.toCtrlClickArr.length?(this.imgList.forEach(function(t,e){t.isCheck=!1}),this.toClickArr.push(this.toCtrlClickArr[0]),this.toCtrlClickArr=[]):this.imgList.forEach(function(t,e){t.isCheck&&a.push({e:t,i:e})}),0!=a.length){this.toClickArr=[],t.isCheck=!0;var o={data:a[a.length-1].e,index:a[a.length-1].i};this.toClickArr.push(o)}t.isCheck=!0;var n={data:t,index:e};if(this.toClickArr.push(n),this.toClickArr.length>=2){var l="",r="";this.toClickArr[this.toClickArr.length-2].index<this.toClickArr[this.toClickArr.length-1].index?(l=this.toClickArr[this.toClickArr.length-2].index,r=this.toClickArr[this.toClickArr.length-1].index):(l=this.toClickArr[this.toClickArr.length-1].index,r=this.toClickArr[this.toClickArr.length-2].index),this.imgList[l].isCheck=!0,this.imgList[r].isCheck=!0,this.imgList.forEach(function(t,e){e>=l&&e<=r&&(t.isCheck=!0)})}}else{var c={data:t,index:e};this.toClickArr.push(c),this.sliderVal=6,this.imgList.forEach(function(t){t.isCheck=!1}),t.isCheck=!0,this.lookImgData=t,this.imgVal=7,this.imgOneIntroShow=!0,this.$nextTick(function(){t.classType="4",i.$refs.houseAside.getassetsIntro(t)})}},getAssetsRefAssets:function(t){var e=this,i={assets_id:t.id};Object(j.A)(i).then(function(t){e.assetsFile=t})},getAssetsRefFile:function(t){var e=this,i={assets_id:t.id};Object(j.B)(i).then(function(t){e.linkFile=t})},getassetsIntro:function(t){var e=this,i={id:t.id};Object(j.w)(i).then(function(i){var s={id:t.id},a="",o="";e.assetsImgList=[],Object(j.z)(s).then(function(t){t.forEach(function(t){if("1"==t.type){var i={assets_id:t.assets_id,disk_id:t.disk_id,disk_path:t.disk_path,file_type:t.file_type,id:t.id,server_name:t.server_name,server_path:t.server_path,sort:t.sort,type:t.type,www_path:t.www_path,thum:e.$task.imgBaseUrl+t.www_path+t.server_path};e.assetsImgList.push(i)}else a=e.$task.imgBaseUrl+t.www_path+t.server_path,o=t.id}),i.mac_thum=a,i.thumid=o;var s=new Image;if(s.src=i.mac_thum,e.imgOneIntroShow);else{e.imgOneIntroShow=!0;var n=document.getElementById(i.id);e.$refs.waterfall.scrollTop=n.offsetTop+10}s.onload=function(){e.$nextTick(function(){e.$refs.imgintroImg.offsetWidth*(s.width/s.height)>e.$refs.imgintroImg.offsetWidth?e.imgpriWidthHeight={width:"100%",height:"".concat(e.$refs.imgintroImg.offsetHeight,"px")}:e.imgpriWidthHeight={width:"".concat(e.$refs.imgintroImg.offsetHeight*(s.width/s.height),"px"),height:"".concat(e.$refs.imgintroImg.offsetHeight,"px")}}),e.$nextTick(function(){i.src=i.mac_thum,i.images=[i.mac_thum],i.labelValue=[],i.classValue=[]})},e.clickData=i,0!=e.assetsImgList.length&&e.$task.arrSortForObj(e.assetsImgList,"sort","desc")})})},toCloseImgIntro:function(){this.imgOneIntroShow=!1,this.toShowLabelCloseShow=!1,this.sliderVal=0,this.imgVal=0},toUploadImgSubmit:function(){var t=this,e=[],i=[];this.uploadImgs.forEach(function(t){0==t.class_list.length&&e.push(t);var s=[];t.class_list.forEach(function(t){s.push(t[t.length-1])});var a={name:t.name,thum:t.thum,path:t.path,class_list:s,label_list:t.label_list};i.push(a)}),0!=e.length&&this.$message({type:"warning",message:"分类不能为空,请检查"});var s={json:f()(i)};Object(F.b)(s).then(function(e){t.$message({type:"success",message:"添加成功"}),t.getClassImg()})},getClassImg:function(){var t=this;this.imgsArr=[],this.imgList=[];[].push(this.treeClickData.id);var e={class_list:f()(this.treeClickData.idArr),type:"4",position:(this.currentPage-1)*this.pageSize,length:this.pageSize};Object(F.c)(e).then(function(e){0==e.length?(t.countNum=0,t.dataLoading=!1,Object(_.a)()):(t.imgsArr=e.data,t.countNum=Number(e.count),t.dataLoading=!1,t.imgList=[],t.loadImage())})},treeClick:function(t,e){this.dataLoading=!0,this.setMoreAssetsFlag=!1,this.currentPage=1,this.toClickArr=[],this.boardList=[],this.searchValue="",this.isShift=!1;var i=[];i.push(t.id),function t(e){0!=e.children.length&&e.children.forEach(function(e){i.push(e.id),t(e)})}(t),t.idArr=i,this.treeClickData=t,this.getClassImg()},setClassList:function(t){var e=this;if(0==t.length)return"--";var i=[];return t.forEach(function(t){var s=[];var a=e.midallClassTree.findIndex(function(e){return e.id==t.class_id});s.push(e.midallClassTree[a].name),i.push({name:s.join("/"),id:t.id})}),i},setClassName:function(t){var e=this.midallClassTree.findIndex(function(e){return e.id==t});return this.midallClassTree[e].name},setLabel:function(t){var e=this;if(null==t||0==t.length)return"--";var i=[];return t.forEach(function(t){var s=e.labelList.findIndex(function(e){return e.id==t.label_id});i.push(e.labelList[s].name)}),i},setLabelName:function(t){var e=this.labelList.findIndex(function(e){return e.id==t});if(-1!=e)return this.labelList[e].name},isLabelHandel:function(t,e){if(0==t){var i=[];e.label_list.forEach(function(t){var s={label_id:t,model_id:"",action_id:"",img_id:e.id,type:3};i.push(s)});var s={json:f()(i)};Object(A.e)(s).then(function(t){t.forEach(function(t){e.label_record.push(t)}),e.isLabel=!1,e.label_list=[]})}},classListChange:function(t){},isNameHandel:function(t,e){var i={id:e.id,name:e.name};Object(A.l)(i).then(function(t){e.isName=!1})},isClassHandel:function(t,e){if(0==t){var i=[];e.class_list.forEach(function(t){var s={class_id:t[t.length-1],model_id:"",action_id:"",img_id:e.id};i.push(s)});var s={json:f()(i)};Object(A.c)(s).then(function(t){t.forEach(function(t){e.class_record.push(t)}),e.isClass=!1,e.class_list=[]})}},getAllLabelHandel:function(){var t=this;Object(A.j)().then(function(e){t.labelList=e})},toDelArrTask:function(t,e){var i=this,s=[];s.push(e.id);var a={id:f()(s)};Object(A.g)(a).then(function(e){i.uploadImgs.splice(t,1)})},handleAvatarSuccess:function(t,e){var i=JSON.parse(Object(C.a)(t)).data;this.processLinkShow=!0,this.uploadFile.push(1),this.filePercentage=this.uploadFile.length/this.uploadNum*100,100==this.filePercentage&&(this.processLinkShow=!1,this.filePercentage=0,this.uploadNum=0,this.uploadFile=[],this.$message({type:"success",message:"上传完成"})),this.toBase64(i,e.raw)},toBase64:function(t,e){var i=this,s=new Image;s.setAttribute("crossOrigin","anonymous");var a=window.URL.createObjectURL(e);s.src=a,s.onload=function(){var e=document.createElement("canvas"),a=e.getContext("2d"),o=s.width/2,n=s.height/2;e.width=o,e.height=n,a.drawImage(s,0,0,o,n);var l={img:e.toDataURL("image/jpeg",.8)};Object(k.a)(l).then(function(e){if(void 0!=i.treeClickData.id){var s=[],a={name:t.filename,thum:e,path:t.fileurl,class_list:[i.treeClickData.id],label_list:[]};s.push(a);var o={json:f()(s)};Object(F.b)(o).then(function(s){var a=[];null!=s[0].class_record&&s[0].class_record.forEach(function(t){a.push(t.class_id)});var o=[];null!=s[0].label_record&&s[0].label_record.forEach(function(t){o.push(t.label_id)}),i.uploadImgs.push({id:s[0].id,name:s[0].name,thum:e,path:t.fileurl,class_list:[],class_record:null==s[0].class_record?[]:s[0].class_record,label_record:null==s[0].label_record?[]:s[0].label_record,label_list:o,isName:!1,isClass:!1,isLabel:!1})})}else i.$message({type:"warning",message:"分类不能为空,请检查"})})}},beforeAvatarUpload:function(t){var e=t.name.slice(t.name.lastIndexOf("."),t.name.length),i=".jpg"===e.toLowerCase()||".png"===e.toLowerCase()||".gif"===e.toLowerCase()||".jpeg"===e.toLowerCase(),s=t.size/1024/1024<50;return i||(Object(_.a)(),this.$message.error("图片格式暂不支持!")),s||(Object(_.a)(),this.$message.error("上传图片大小不能超过 10MB!")),s&&i},toOpenImgBox:function(){var t=this;S.a.file.uploadWay="one",window.ue.obj.webgetmodeldata().then(function(e){var i=JSON.parse(e);t.uploadImgForm.name=i.name,t.uploadImgForm.local_path=i.local_path,t.uploadImgForm.type=i.type,t.uploadImgForm.ref_file=i.ref_file;var s=[];i.ref_file.forEach(function(t){s.push({id:i.contentpath+t,name:t,process:0,state:""})});var a=[];i.ref_assets.forEach(function(t){var e=t.slice(t.lastIndexOf("/")+1,t.length),i=t.slice(0,t.lastIndexOf("/"));a.push({name:e,path:i})}),t.uploadImgForm.reffileList=s,0!=a.length?t.get_assetsId(a):t.uploadImgForm.refAssets=[],t.uploadImgForm.ref_assets=i.ref_assets,t.uploadImgForm.contentpath=i.contentpath,t.uploadImgShow=!0}).catch(function(){t.uploadImgShow=!1})},loadImage:function(){var t=Object(u.a)(d.a.mark(function t(){var e,i,s;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.imgsArr.length)){t.next=42;break}if(i=this.imgsArr[e],s="",i.asets_play=null==i.asets_play||""==i.asets_play?[]:i.asets_play,i.asets_play.forEach(function(t){"0"==t.type&&(s=t)}),t.t0=this.imgList,"ue"!=this.navigationType){t.next=13;break}return t.next=10,this.getLocationFile(i);case 10:t.t1=t.sent,t.next=14;break;case 13:t.t1=!1;case 14:return t.t2=t.t1,t.next=17,this.setImgHeight(this.$task.imgurl+"/assets/"+i.thum).height;case 17:t.t3=t.sent,t.t4=null==i.class_record||""==i.class_record?[]:i.class_record,t.t5=i.cname,t.t6=i.creator_id,t.t7=i.fbx,t.t8=i.id,t.t9=i.x,t.t10=i.y,t.t11=i.z,t.t12=i.state,t.t13=null==i.label_record||""==i.label_record?[]:i.label_record,t.t14=i.local_path,t.t15=this.$task.imgurl+"/assets/"+i.mac_thum,t.t16=i.name,t.t17=this.$task.imgBaseUrl+s.www_path+s.server_path,t.t18=i.type,t.t19=i.time,t.t20=i.personnel_name,t.t21=""==i.personnel_thum||null==i.personnel_thum?"/Upload/thum9.png":this.$task.imgurl+i.personnel_thum,t.t22={isSelect:!1,isShow:!1,isLocFileShow:t.t2,successNum:0,process:0,isCheck:!1,height:t.t3,class_record:t.t4,cname:t.t5,creator_id:t.t6,fbx:t.t7,id:t.t8,x:t.t9,y:t.t10,z:t.t11,state:t.t12,label_record:t.t13,local_path:t.t14,mac_thum:t.t15,name:t.t16,thum:t.t17,type:t.t18,time:t.t19,personnel_name:t.t20,personnel_thum:t.t21},t.t0.push.call(t.t0,t.t22),this.dataLoading=!1;case 39:e++,t.next=1;break;case 42:this.dataLoading=!1;case 43:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),setImgHeight:function(t){return new o.a(function(e,i){var s=new Image;s.src=t,s.onload=function(){e(s)}})},getLocationFile:function(t){return new o.a(function(e,i){window.ue.obj.webgetdownloadprojectpath().then(function(i){window.ue.obj.webgetfilestat(i+t.local_path+"/"+t.name+".uasset").then(function(t){0==JSON.parse(t).fsize?e(!1):e(!0)})})})},getLocationFile1:function(t){return new o.a(function(e,i){window.ue.obj.webgetdownloadprojectpath().then(function(i){window.ue.obj.webgetfilestat(i+t.local_path).then(function(t){0==JSON.parse(t).fsize?e(!1):e(!0)})})})},scrollLoad:function(){var t=this,e=document.documentElement.scrollHeight||document.body.scrollHeight,i=document.documentElement.clientHeight||document.body.clientHeight,s=document.documentElement.scrollTop||document.body.scrollTop;this.onFetching||i>=e-s&&(this.onFetching=!0,setTimeout(function(){t.imgNum=t.imgNum+10,t.imgList=[],t.loadImage(),t.onFetching=!1},500))},toCloseTreeBox:function(){this.colValue=0,this.rightIconShow=!0},toOpenTreeBox:function(){this.colValue=4,this.rightIconShow=!1},getparents:function(t){"0"==t.data.prid?this.treeMulu.push(t.data.name):void 0!=t.parent&&this.getparents(t.parent)},toSeeIntro:function(){this.modelIntroShow=!0},toCloseIntro:function(){this.modelIntroShow=!1},currentChange:function(){this.imgsArr=[],this.imgList=[],""==this.searchValue||null==this.searchValue?this.getClassImg():this.searchAssets(),document.body.scrollTop=document.documentElement.scrollTop=0},sizeChange:function(t){this.imgsArr=[],this.imgList=[],this.pageSize=t,""==this.searchValue||null==this.searchValue?this.getClassImg():this.searchAssets(),document.body.scrollTop=document.documentElement.scrollTop=0},handleSearchChange:function(t){this.dataLoading=!0,""!=this.searchValue&&null!=this.searchValue?(this.searchBoard(),this.searchAssets()):this.boardList=[]},addBoardchChange:function(){this.getAllboard()},searchAssets:function(){var t=this;this.dataLoading=!0,this.imgsArr=[],this.imgList=[],this.handleSearchShow=!1;[].push(this.treeClickData.id);var e={name:this.searchValue,position:(this.currentPage-1)*this.pageSize,length:this.pageSize,type:"4"};Object(j.I)(e).then(function(e){0==e.length?(t.countNum=0,t.handleSearchShow=!0,t.dataLoading=!1,Object(_.a)()):(t.imgsArr=e.data,t.countNum=Number(e.count),t.handleSearchShow=!0,t.imgList=[],t.loadImage())})},searchBoard:function(){var t=this,e={name:this.searchValue,position:(this.currentPage-1)*this.pageSize,length:this.pageSize,if_get_user:0,share_ctr:f()(["0","1"]),if_page:"0"};Object(j.D)(e).then(function(e){0==e.length?t.countNum=0:(t.$task.arrSortForObj(e.data,"sort","desc"),e.data.forEach(function(e){if(e.board_record=null==e.board_record||""==e.board_record?[]:e.board_record,null!=e.board_record||""!=e.board_record){e.board_record.forEach(function(e){var i="",s="",a="";switch(e.is_type){case"0":case"1":case"2":case"3":i=e.id,s=t.$task.imgurl+"/assets/"+e.thum,a=e.name}e.thumid=i,e.thumthum=s,e.thumname=a});for(var i=4-e.board_record.length,s=0;s<i;s++)e.board_record.push({thumid:0,thumthum:"",thumname:""})}e.isShow=!1,e.isHeart=!1}),Number(e.count)>5?(t.boardList=e.data.slice(0,5),t.moreBoard=!0):t.boardList=e.data)})},beachSetAssetXYZ:function(){var t=this;this.imgList.forEach(function(e){e.isCheck&&t.getAssetDataAndSetXYZ(e)})},getAssetDataAndSetXYZ:function(t){var e=this,i=t.name,s=t.local_path,a="/Game"+(s=s.slice(s.indexOf("/"),s.length))+"/"+i+"."+i;window.ue.obj.webgetdownloadprojectpath().then(function(i){var s=i+t.local_path+"/"+t.name+".uasset";window.ue.obj.webgetfilestat(s).then(function(i){0==JSON.parse(i).fsize?e.$message({type:"error",message:"未找到文件"}):window.ue.obj.getassetdata(a).then(function(i){""!=i?function(i){var s=i.min_x,a=i.min_y,o=i.min_z,n=i.max_x,l=i.max_y,r=i.max_z,c=Math.abs(s)+Math.abs(n);c=c.toFixed(2);var h=Math.abs(a)+Math.abs(l);h=h.toFixed(2);var d=Math.abs(o)+Math.abs(r);d=d.toFixed(2);var u={id:t.id,x:c,y:h,z:d};Object(j.J)(u).then(function(t){e.$message({type:"success",message:"修改成功"})})}(JSON.parse(i)):e.$message({type:"error",message:"大小获取失败"})})})})},toEditeAssets:function(t){this.$router.push({path:"/editeAsset",query:{id:t.id}})},downAllAssets:function(){for(var t=[],e=[],i=[],s="",a=0;a<this.midallClassTree.length;a++)t.push(this.midallClassTree[a].id);var o,n=function(){var t={assets_id:f()(e)};Object(j.H)(t).then(function(t){i=t,l()})},l=function(){window.ue.obj.webgetdownloadprojectpath().then(function(t){s=t,r()}).catch(function(t){})},r=function(){for(var t=0;t<i.length;t++){var e=i[t],a={name:e.name,size:e.size,id:s+e.local_path,type:"down",localPath:s+e.local_path,loclocal_path:e.local_path,serverPath:e.disk_path+e.server_path,nodisk_path:e.local_path,successFc:function(t){o(t)},progressFc:function(t){},failFc:function(t){n(t)}};S.a.file.addDownList(a);var o=function(t){},n=function(t){}}};o={class_list:f()(t),type:"4",position:0,length:1e5},Object(F.c)(o).then(function(t){for(var i=t.data,s=0;s<i.length;s++)e.push(i[s].id);n()})},addOtherAsset:function(){this.addAssetData.name="",this.addAssetData.cname="",this.assetThum={},this.addAssetImgList=[],this.assetFileList=[],this.assetThumData="",this.treeClickData.id?this.$refs.addAssetsDialog.addOtherAsset(this.treeClickData):this.$message({message:"请选择分类后重试",type:"warning"})},openSetAssetThumCtr:function(){this.addAssetCropperbox=!0},assetUploadImg:function(t){var e=this,i=t.target.files[0];if(!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(t.target.value))return alert("图片类型必须是.gif,jpeg,jpg,png,bmp中的一种"),!1;var a=new FileReader;a.onload=function(t){var a,o,n,l;a="object"===Object(s.a)(t.target.result)?window.URL.createObjectURL(new Blob([t.target.result])):t.target.result,o=i,n=function(t){var i=new Image;i.setAttribute("crossOrigin","anonymous"),i.src=t,i.onload=function(){e.addAssetOptionCircleimg=t,e.addAssetOption.img=a}},(l=new FileReader).readAsDataURL(o),l.onload=function(t){n(t.target.result)}},a.readAsArrayBuffer(i)},assetRotateLeft:function(){this.$refs.assetCropper.rotateLeft()},assetRotateRight:function(){this.$refs.assetCropper.rotateRight()},assetQueren:function(){var t=this,e=this.$refs.assetCropper.cropW,i=this.$refs.assetCropper.cropH,s=1;s=(s=e>i?600/e:600/i).toFixed(2),this.$refs.assetCropper.enlarge=s,this.$refs.assetCropper.getCropData(function(){var e=Object(u.a)(d.a.mark(function e(i){var s,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.assetThumData=i,e.next=5,t.getbase64Img(i);case 5:s=e.sent,a=s.path.slice(s.path.lastIndexOf("/")+1,s.path.length),s.file_type="png",s.server_name=a,t.assetThum=s,t.addAssetCropperbox=!1;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},assetImgupload:function(t,e,i){var s=JSON.parse(Object(C.a)(t)).data,a=e.name.slice(e.name.lastIndexOf(".")+1,e.name.length).toLowerCase(),o=s.path.slice(s.path.lastIndexOf("/")+1,s.path.length);this.addAssetImgList.push({file_type:a,server_name:o,server_path:s.path,disk_id:s.disk_id,www_path:s.www_path})},addAssetMaxImgDel:function(t){this.addAssetImgList.splice(t,1)},addAsssetFileListDel:function(t){this.assetFileList.splice(t,1)},asssetFileUpload:function(t,e,i){var s=JSON.parse(Object(C.a)(t)).data,a=e.name.slice(e.name.lastIndexOf(".")+1,e.name.length).toLowerCase(),o=s.path.slice(s.path.lastIndexOf("/")+1,s.path.length),n=g()(e.raw.lastModified/1e3);this.assetFileList.push({file_name:e.name,size:e.size,mtime:n,file_type:a,server_name:o,server_path:s.path,disk_id:s.disk_id,www_path:s.www_path})},submitAsset:function(){this.getClassImg()}})},D=(i("7ded"),i("2877")),$=Object(D.a)(B,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("d2-container",[i("div",[i("div",{ref:"imgBoxTopStyle",staticClass:"imgBoxTopStyle"},[i("div",[i("div",{staticClass:"topTips",staticStyle:{padding:"unset","background-color":"#252423"}},[t.rightIconShow?i("div",{staticClass:"iconSameStyle rightIconStyle",on:{click:t.toOpenTreeBox}},[i("d2-icon",{attrs:{name:"angle-double-right "}})],1):t._e(),i("el-row",[i("el-col",{staticClass:"contentTopBox",attrs:{span:t.colValue}},[0==t.rightIconShow?i("div",{staticClass:"iconSameStyle closeIconStyle",on:{click:t.toCloseTreeBox}},[i("d2-icon",{attrs:{name:"close "}})],1):t._e(),i("div",{staticClass:"imgTreeBox",style:t.treeHeight},[i("el-tree",{ref:"projectTree",staticClass:"4",attrs:{"default-expanded-keys":t.defaultexpandedkeys,data:t.treeData,"node-key":"id","expand-on-click-node":!1,"highlight-current":!0,props:{value:"id",label:"name"}},on:{"node-click":t.treeClick}})],1)]),i("el-col",{class:t.rightIconShow?"modelTitle1":"modelTitle",attrs:{span:24-t.colValue}},[i("div",{staticClass:"selectBox",staticStyle:{background:"#2d2c2c"}},[i("div",{staticClass:"imgInput"},[i("el-input",{staticStyle:{width:"30%","vertical-align":"top"},attrs:{placeholder:"请输入内容",size:"mini",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearchChange(e)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),i("div",[i("div",{staticClass:"settingSelectStyle"},[i("div",{staticClass:"leftTopiconBoxStyle1"},[t.setMoreAssetsFlag?i("div",{staticStyle:{display:"inline-block"}},[i("div",{staticClass:"buttonStyle1",on:{click:t.toGetMoreAssets}},[t._v("\n                          完成\n                        ")]),i("div",{staticClass:"buttonStyle1",on:{click:t.downAllAssets}},[t._v("\n                          下载全部\n                        ")]),i("div",{staticClass:"buttonStyle1",on:{click:t.addOtherAsset}},[t._v("\n                          上传资产\n                        ")]),i("div",{staticClass:"buttonStyle1",on:{click:t.beachSetAssetXYZ}},[t._v("\n                          重新设置资产XYZ\n                        ")]),i("div",{staticClass:"buttonStyle1",on:{click:t.toAddAssetsLabel}},[t._v("\n                          添加标签\n                        ")]),i("div",{staticClass:"buttonStyle1",on:{click:function(e){return t.toAddMoreAssets("add")}}},[t._v("\n                          添加到\n                        ")]),i("div",{staticClass:"buttonStyle1",on:{click:function(e){return t.toAddMoreAssets("move")}}},[t._v("\n                          移动分类\n                        ")]),i("div",{staticClass:"buttonStyle1 delAssetsBtn",on:{click:t.toDelMoreAssets}},[t._v("\n                          删除记录\n                        ")])]):i("div",{staticClass:"buttonStyle1",on:{click:t.toSetMoreAssets}},[t._v("\n                        管理\n                      ")])]),i("div",{staticClass:"leftTopiconBoxStyle",on:{click:function(e){t.shopCardShow=!0}}},[t.shopCardShow?i("div",{staticClass:"shopCardClass",on:{mouseleave:function(e){return t.shopMouseLeave()}}},[i("div",{staticClass:"fileList",staticStyle:{height:"500px","overflow-y":"auto"}},t._l(t.shopCart,function(e,s){return i("div",{key:e.id,staticClass:"fileListRow",staticStyle:{height:"unset",padding:"10px 0px",position:"relative"}},[i("div",{staticClass:"fileListRowIconStyle",on:{click:function(e){return t.toDelShopCart(s)}}},[i("i",{staticClass:"el-icon-error",staticStyle:{color:"#d36317"}})]),i("div",{staticClass:"pngBase64DataStyle"},[i("img",{attrs:{src:e.thum,alt:""}})]),i("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[i("div",{staticClass:"fileName"},[t._v("\n                                "+t._s(e.name)+"\n                              ")]),i("div",{staticClass:"filePath"},[i("div",[t._v("\n                                  "+t._s(e.local_path)+"\n                                ")]),i("div",[t._v("\n                                  "+t._s(e.state)+"\n                                ")])])])])}),0),i("div",{staticClass:"shopCardClassBtn",on:{click:function(e){return t.toDownMore()}}},[t._v("\n                          下载\n                        ")])]):t._e(),0!=t.shopCart.length?i("el-badge",{attrs:{value:t.shopCart.length,max:99}},[i("d2-icon",{staticStyle:{"font-weight":"700",color:"#e0e0e0"},attrs:{name:"cart-plus"}})],1):i("d2-icon",{staticStyle:{"font-weight":"700",color:"#e0e0e0"},attrs:{name:"cart-plus"}})],1),"ue"!=t.navigationType?i("div",{staticClass:"leftTopiconBoxStyle"},[i("el-dropdown",{staticClass:"d2-mr",attrs:{size:"small",trigger:"click"}},[i("span",{staticClass:"el-dropdown-link"},[i("d2-icon",{staticStyle:{"font-weight":"700",color:"#e0e0e0"},attrs:{name:"user"}})],1),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(e){return t.toArriveBoard("my")}}},[i("d2-icon",{staticClass:"d2-mr-5",attrs:{name:"map"}}),t._v("我的收藏\n                          ")],1),i("el-dropdown-item",{nativeOn:{click:function(e){return t.toArriveBoard("follow")}}},[i("d2-icon",{staticClass:"d2-mr-5",attrs:{name:"heart"}}),t._v("我的关注\n                          ")],1),i("el-dropdown-item",{nativeOn:{click:function(e){return t.ChangePassword(e)}}},[i("d2-icon",{staticClass:"d2-mr-5",attrs:{name:"pencil"}}),t._v("修改密码\n                          ")],1),i("el-dropdown-item",{nativeOn:{click:function(e){return t.logOff(e)}}},[i("d2-icon",{staticClass:"d2-mr-5",attrs:{name:"power-off"}}),t._v("注销\n                          ")],1)],1)],1)],1):t._e()])])]),i("div",{ref:"waterfallBox",staticStyle:{position:"relative"}},[i("el-row",[i("el-col",{attrs:{span:24-t.imgVal}},[t.dataLoading?i("div",{staticClass:"wateFalloading",style:t.contentHeight1},[i("div",[i("i",{staticClass:"el-icon-loading",staticStyle:{"font-weight":"700","font-size":"26px"}})])]):i("div",{ref:"waterfall",staticClass:"waterfall-height-js imgBoxStyle",style:t.contentHeight},[i("div",{staticStyle:{"overflow-x":"auto",position:"relative"}},[t._l(t.boardList,function(e,s){return i("div",{key:s,staticClass:"boardimgBoxStyle",on:{click:function(i){return t.toClickImg(e)},mouseover:function(i){return t.boardMouseOver(e)},mouseleave:function(i){return t.boardMouseLeave(e)}}},[e.isShow?i("div",{staticClass:"moveMask"}):t._e(),"1"==e.share_ctr?i("div",{staticClass:"isshare_ctrStyle"},[i("span",{staticStyle:{color:"#e0e0e0"}},[t._v("共享")])]):t._e(),i("div",{staticStyle:{width:"240px",height:"240px","border-radius":"13px",overflow:"hidden"}},t._l(e.board_record,function(t,e){return i("div",{key:e,class:0==e?"boardImgBig":"boardImgSmall"},[""!=t.thumthum?i("img",{attrs:{src:t.thumthum,alt:""}}):i("div")])}),0),i("div",{staticClass:"boardimgname"},[t._v(t._s(e.name))]),i("div",{staticClass:"boardimgname boardimgTips"},[t._v("\n                            "+t._s(e.share_num)+" 共享 "+t._s(e.follow_num)+" 关注\n\n                            "),i("span",{staticStyle:{float:"right"}},[t._v(t._s(e.personnel_name))])])])}),t.moreBoard?i("div",{staticClass:"moreBoardStyle"},[i("i",{staticClass:"el-icon-d-arrow-right",staticStyle:{color:"#777777","font-size":"40px"},on:{click:t.toLookMoreShare}})]):t._e()],2),i("div",{staticClass:"waterfall-height-css"},[0==t.imgList.length?i("div",{staticClass:"noDataBoxStyle1"},[i("span",[t._v(" 暂无数据 ")])]):t._l(t.imgList,function(e,s){return i("div",{key:s,staticClass:"image-box imgitem1",class:t.changeClassValue,style:1==e.isCheck||e.isShow?"border: 2px solid #d36317;":"",attrs:{id:e.id},on:{click:function(i){return t.toLookSourceImg(e,s)},contextmenu:function(i){return i.preventDefault(),t.rightClick(i,e,t.imgList)},mouseover:function(i){return t.imgMouseOver(e)},mouseleave:function(i){return t.imgMouseLeave(e)}}},[e.showProcess?i("div",{staticClass:"processCircleNum"},[t._v("\n                            下载中："+t._s(e.process)+"/"+t._s(e.count)+"\n                          ")]):t._e(),i("img",{style:"height: "+t.imgSameHeight+"px;",attrs:{src:e.thum}}),e.isCheck||e.isShow||t.isShowName?i("div",{staticClass:"imgBoxBackground"},[t._v("\n                            "+t._s(e.name)+"("+t._s(e.cname)+")\n                          ")]):t._e(),i("div",[i("div",{staticClass:"imgLoveBoxStyle"},["0"!=e.state?i("div",{staticClass:"imgLoveStyle1",staticStyle:{width:"50px","vertical-align":"revert"}},[i("span",{staticClass:"imgstateBoxStyle",style:"background:"+t.setImgState(e.state).color+";color:#ffffff"},[t._v("\n                                  "+t._s(t.setImgState(e.state).name)+"\n                                ")])]):t._e(),e.isCheck||e.isShow?i("div",{staticClass:"imgLoveStyle1",on:{click:function(i){return i.stopPropagation(),t.toAddMyBoard(e)}}},[i("d2-icon",{staticStyle:{"font-weight":"700",color:"#d36317"},attrs:{name:"heart-o"}})],1):t._e(),e.isCheck||e.isShow?i("div",{staticClass:"imgLoveStyle1",on:{click:function(i){return i.stopPropagation(),t.toShareAssets(e)}}},[i("i",{staticClass:"el-icon-s-promotion",staticStyle:{"font-weight":"700",color:"#d36317"},attrs:{"aria-hidden":"true"}})]):t._e(),e.isCheck||e.isShow?i("div",{staticClass:"imgLoveStyle2",on:{click:function(i){return i.stopPropagation(),t.toAddShopCard(e)}}},[i("d2-icon",{staticStyle:{"font-weight":"700",color:"#d36317"},attrs:{name:"cart-plus"}})],1):t._e(),!e.isCheck&&!e.isShow||e.isLocFileShow?t._e():i("div",{staticClass:"imgLoveStyle",on:{click:function(i){return i.stopPropagation(),t.toDownSelectAssetsAndCurrent(e)}}},[i("d2-icon",{staticStyle:{"font-weight":"700",color:"#d36317"},attrs:{name:"arrow-down"}})],1)]),e.isLocFileShow&&t.isShowLoc?i("div",{staticClass:"imgLoveStyle3"}):t._e()])])}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],ref:"menuList",staticClass:"rightClickBox singleStyle",staticStyle:{top:"10px",left:"10px",width:"unset","font-size":"12px",cursor:"pointer",padding:"unset"}},[i("ul",{staticClass:"menu",attrs:{id:"menu"}},["ue"!=t.navigationType||t.rightClickData.isLocFileShow?t._e():i("span",[i("div",{staticStyle:{padding:"2px 10px",cursor:"pointer"},on:{click:function(e){return t.toDownSelectAssets(!1)}}},[i("span",[t._v(" 下载")])])]),"ue"==t.navigationType?i("span",[i("div",{staticStyle:{padding:"2px 10px",cursor:"pointer"},on:{click:function(e){return t.toOpanLocation(t.rightClickData)}}},[i("span",[t._v(" 浏览至资产")])])]):t._e(),"ue"==t.navigationType?i("span",[i("div",{staticStyle:{padding:"2px 10px",cursor:"pointer"},on:{click:function(e){return t.toDownSelectAssets(!0)}}},[i("span",[t._v(" 卸载重下")])])]):t._e(),t.toDelBtnShow?i("span",[i("div",{staticStyle:{padding:"2px 10px",cursor:"pointer"},on:{click:function(e){return t.toEditeAssets(t.rightClickData)}}},[i("span",[t._v(" 编辑资产")])])]):t._e(),t.toDelBtnShow?i("span",[i("div",{staticStyle:{padding:"2px 10px",cursor:"pointer"},on:{click:function(e){return t.toDeleleAssets(t.rightClickData)}}},[i("span",[t._v(" 删除资产")])])]):t._e()])])],2)]),i("div",{staticClass:"imgPagination"},[i("el-pagination",{staticStyle:{display:"inline-block"},attrs:{"current-page":t.currentPage,"page-sizes":[100,200,300,400,500],"page-size":t.pageSize,layout:"sizes, prev, pager, next, jumper,total,slot",total:t.countNum},on:{"size-change":t.sizeChange,"current-change":t.currentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}}),i("div",{staticClass:"largeIconStyle"},[t.toSetSetUpShow?i("div",{staticClass:"toSetSetUpStyle",on:{mouseleave:function(e){t.toSetSetUpShow=!1}}},[i("div",[i("span",{staticClass:"toSetSetUpTitleStyle"},[t._v("角标开关")]),i("span",{staticStyle:{float:"right"}},[i("el-switch",{staticStyle:{"margin-right":"10px",width:"30px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isShowLocchange},model:{value:t.isShowLoc,callback:function(e){t.isShowLoc=e},expression:"isShowLoc"}})],1)]),i("div",[i("span",{staticClass:"toSetSetUpTitleStyle"},[t._v("名称开关")]),i("span",{staticStyle:{float:"right"}},[i("el-switch",{staticStyle:{"margin-right":"10px",width:"30px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isShowNamechange},model:{value:t.isShowName,callback:function(e){t.isShowName=e},expression:"isShowName"}})],1)]),i("div",[i("span",{staticClass:"toSetSetUpTitleStyle"},[t._v("主题")]),i("div",{staticStyle:{display:"flex"}},[i("div",{staticClass:"zhutiColorBaseStyle yellowblock",style:"yellowblock"==t.activeColor?"border: 1px solid #d36317;":"",on:{click:function(e){return t.toChangeColor("yellowblock")}}}),i("div",{staticClass:"zhutiColorBaseStyle baseblock",style:"baseblock"==t.activeColor?"border: 1px solid #d36317;":"",on:{click:function(e){return t.toChangeColor("baseblock")}}}),i("div",{staticClass:"zhutiColorBaseStyle buleBlock",style:"buleBlock"==t.activeColor?"border: 1px solid #d36317;":"",on:{click:function(e){return t.toChangeColor("buleBlock")}}})])])]):t._e(),i("div",{staticStyle:{display:"inline-block","margin-right":"10px"},on:{click:t.toSetSetUp}},[i("i",{staticClass:"el-icon-setting",staticStyle:{"font-weight":"700",color:"#606266"}})]),i("el-dropdown",{staticStyle:{"margin-right":"10px"},attrs:{trigger:"click"},on:{command:t.handleChange}},[i("span",{staticClass:"el-dropdown-link"},[i("d2-icon",{staticClass:"iconCursor",attrs:{name:"th-large"}})],1),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"big",icon:"big"==t.seeIconSize?"el-icon-check":""}},[t._v("大尺寸")]),i("el-dropdown-item",{attrs:{command:"middle",icon:"middle"==t.seeIconSize?"el-icon-check":""}},[t._v("中尺寸")]),i("el-dropdown-item",{attrs:{command:"small",icon:"small"==t.seeIconSize?"el-icon-check":""}},[t._v("\n                              小尺寸")])],1)],1)],1)],1)]),t.imgOneIntroShow?i("el-col",{attrs:{span:t.imgVal}},[i("houseAside",{ref:"houseAside",on:{imgOneIntroShow:t.imgOneIntroShowChange,toCloseImgIntro:t.toCloseImgIntroChange,toJumpClass:t.toJumpClassChange,refineStateBlur:t.refineStateBlurChange}})],1):t._e()],1)],1)])],1)],1)]),t.uploadImgShow?i("div",{staticClass:"uploadImgBoxStyle",style:t.maskHeigth},[i("div",{staticClass:"topContentStyle"},[i("div",{staticClass:"uploadModelStyle"},[t._v("上传模型")]),i("div",{staticClass:"caozuoBtnBoxStyle"},[t.canUpload?i("div",{staticClass:"buttonStyle uploadBtnStyle",on:{click:function(e){!t.uploadLoading&&t.toUploadAssets()}}},[t._v("\n              上传\n              "),t.uploadLoading?i("i",{staticClass:"el-icon-loading"}):t._e()]):i("div",{staticClass:"buttonStyle uploadBtnStyle1"},[t._v("不可上传")]),i("div",{staticClass:"buttonStyle",on:{click:t.toCancalUpload}},[t._v("取消")]),i("div",{staticClass:"buttonStyle",on:{click:t.toReGetData}},[t._v("重新获取")])])]),i("div",[i("el-row",[i("el-col",{staticClass:"colImgHeightStyle",style:t.fileCaozuoHeigth},[i("div",{staticClass:"colImgpaddingStyle"},[i("div",{ref:"colImgStyle",staticClass:"colImgStyle"},[i("img",{style:t.imgWidthHeight,attrs:{src:t.uploadImgForm.mac_thum,alt:""}}),i("div",{staticClass:"colImgBtnPosition"},[i("div",{staticClass:"colImgBtnStyle",on:{click:t.toUploadFileDia}},[t._v("\n                      上传\n                    ")]),i("div",{staticClass:"colImgBtnStyle",on:{click:t.toScreenShot}},[t._v("\n                      拍屏\n                    ")])])]),i("div",{staticStyle:{"margin-top":"15px"}},[i("div",{staticClass:"colimgIntroBox"},[i("span",{staticClass:"colimgIntroTitle"},[t._v(" 资产名称 ")]),i("span",{staticClass:"colImgIntroText"},[t._v("\n                      "+t._s(t.uploadImgForm.name)+"\n                    ")])]),i("div",{staticClass:"colimgIntroBox"},[i("span",{staticClass:"colimgIntroTitle"},[t._v(" 本地路径 ")]),i("span",{staticClass:"colImgIntroText"},[t._v("\n                      "+t._s(t.uploadImgForm.local_path)+"\n                    ")])]),i("div",{staticClass:"colimgIntroBox"},[i("span",{staticClass:"colimgIntroTitle"},[t._v(" 项目路径 ")]),i("span",{staticClass:"colImgIntroText"},[t._v("\n                      "+t._s(t.uploadImgForm.contentpath)+"\n                    ")])]),i("div",{staticClass:"colimgIntroBox"},[i("span",{staticClass:"colimgIntroTitle"},[t._v(" 资产类型 ")]),i("span",{staticClass:"colImgIntroText"},[t._v("\n                      "+t._s(t.uploadImgForm.type)+"\n                    ")])]),i("div",{staticClass:"colimgIntroBox"},[i("span",{staticClass:"colimgIntroTitle"},[t._v(" 中文名 ")]),i("span",{staticStyle:{display:"inline-block"}},[i("el-input",{style:t.inputStyleWidth,attrs:{size:"mini",placeholder:"请输入中文名"},model:{value:t.uploadImgForm.cname,callback:function(e){t.$set(t.uploadImgForm,"cname",e)},expression:"uploadImgForm.cname"}})],1)]),i("div",{staticClass:"colimgIntroBox"},[i("span",{staticClass:"colimgIntroTitle"},[t._v(" 资产分类 ")]),i("span",{staticStyle:{display:"inline-block"}},[i("el-cascader",{style:t.inputStyleWidth,attrs:{filterable:"","popper-class":"assectClass",size:"mini",options:t.treeData,props:{multiple:!0,checkStrictly:!0,value:"id",label:"name"},clearable:""},model:{value:t.uploadImgForm.class,callback:function(e){t.$set(t.uploadImgForm,"class",e)},expression:"uploadImgForm.class"}})],1)]),i("div",{staticClass:"colimgIntroBox"},[i("span",{staticClass:"colimgIntroTitle"},[t._v(" 资产标签 ")]),i("span",{staticStyle:{display:"inline-block"}},[i("el-select",{style:t.inputStyleWidth,attrs:{"popper-append-to-body":!1,filterable:"",size:"mini",multiple:"",clearable:"",placeholder:"请选择"},model:{value:t.uploadImgForm.label,callback:function(e){t.$set(t.uploadImgForm,"label",e)},expression:"uploadImgForm.label"}},t._l(t.labelList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)])])])]),i("el-col",{staticClass:"fileCaoZuoBoxStyle",style:t.fileCaozuoHeigth},[i("div",{staticClass:"fileUploadLisetStyle"},[i("div",{staticClass:"fileUploadListTitle"},[i("span",{staticClass:"fileUploadListTitleName"},[t._v(" 文件列表 ")]),i("span",{staticClass:"fileUploadListTitleNumber"},[t._v("\n                    总数\n                    "),i("span",{staticStyle:{color:"#cc6224"}},[t._v(t._s(t.uploadImgForm.reffileList.length))])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.refFileShow,expression:"refFileShow"}],style:t.fileFileHeigth},t._l(t.uploadImgForm.reffileList,function(e,s){return i("div",{key:s,staticClass:"fileFileHeigthItem"},[t._v("\n                    "+t._s(e.name)+"\n                    "),i("span",{staticStyle:{float:"right","margin-right":"10px"}},[0!=e.process&&void 0!=e.process?i("span",{staticStyle:{"margin-right":"10px"}},[t._v("速度:"+t._s(100*e.process+"%"))]):t._e(),""!=e.state&&void 0!=e.state?i("span",[t._v("状态:"+t._s(e.state))]):t._e()])])}),0)]),i("div",{staticClass:"fileUploadLisetStyle1"},[i("div",{staticClass:"fileUploadListTitle"},[i("span",{staticClass:"fileUploadListTitleName"},[t._v(" 引用资产 ")]),i("span",{staticClass:"fileUploadListTitleNumber"},[t._v("\n                    总数\n                    "),i("span",{staticStyle:{color:"#cc6224"}},[t._v(t._s(t.uploadImgForm.refAssets.length))])])]),i("div",{style:t.fileFileHeigth1},t._l(t.uploadImgForm.refAssets,function(e,s){return i("div",{key:s,staticClass:"fileFileHeigthItem"},[t._v("\n                    "+t._s(e.local_path+e.name)+"\n\n                    "),i("span",{staticStyle:{float:"right","margin-right":"10px"}},[""!=e.state&&void 0!=e.state?i("span",[t._v(t._s(e.state))]):t._e()])])}),0)])])],1)],1)]):t._e()])]),i("el-dialog",{attrs:{title:"裁剪图片",visible:t.Cropperbox,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){t.Cropperbox=e}}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"img_box"},[i("vueCropper",{ref:"cropper",attrs:{img:t.option.img,outputSize:t.option.size,outputType:t.option.outputType,info:t.option.info,full:t.option.full,canMove:t.option.canMove,fixedNumber:t.option.fixedNumber,fixed:t.option.fixed,canMoveBox:t.option.canMoveBox,original:t.option.original,autoCrop:t.option.autoCrop,fixedBox:t.option.fixedBox,canScale:t.option.canScale,high:t.option.high,mode:t.option.mode}})],1),i("button",{staticClass:"btn",on:{click:t.rotateLeft}},[t._v("向左翻转")]),i("button",{staticClass:"btn",on:{click:t.rotateRight}},[t._v("向右翻转")])])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.queren}},[t._v("确 定")])],1)],1),i("el-dialog",{staticClass:"batchUploadDialog",attrs:{title:"编辑信息",visible:t.changeCnameShow,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){t.changeCnameShow=e}}},[i("div",{staticStyle:{height:"400px"}},[i("div",[i("div",{staticClass:"imgIntroTitle"},[t._v("中文名:")]),i("div",{staticClass:"colimgIntroBox"},[i("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{blur:t.changeCnameBlur},model:{value:t.clickData.cname,callback:function(e){t.$set(t.clickData,"cname",e)},expression:"clickData.cname"}})],1)]),i("div",[i("div",{staticClass:"imgIntroTitle"},[t._v("分类:")]),i("div",{staticClass:"imgIntroText"},[i("div",{staticClass:"colimgIntroBox"},[i("el-cascader",{staticStyle:{width:"100%"},attrs:{"collapse-tags":"",filterable:"","popper-class":"assectClass",size:"mini",options:t.midtreeData,props:{multiple:!0,checkStrictly:!0,value:"id",label:"name"},clearable:""},on:{change:t.changeClassNameBlur},model:{value:t.clickData.classValue,callback:function(e){t.$set(t.clickData,"classValue",e)},expression:"clickData.classValue"}})],1)])]),i("div",[i("div",{staticClass:"imgIntroTitle"},[t._v("标签:")]),i("div",{staticClass:"imgIntroText"},[i("div",{staticClass:"colimgIntroBox"},[i("el-select",{staticStyle:{width:"100%"},attrs:{"popper-append-to-body":!1,filterable:"",size:"mini",multiple:"",clearable:"",placeholder:"请选择"},on:{change:t.changeLableBlur},model:{value:t.labelValue,callback:function(e){t.labelValue=e},expression:"labelValue"}},t._l(t.midlabelList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:t.disabled}})}),1)],1)])])])]),i("el-dialog",{staticClass:"batchUploadDialog",attrs:{title:"选择分类",visible:t.addMoreAssetsFlag,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addMoreAssetsFlag=e},close:t.addMoreAssetsFlagClose}},[i("div",{staticClass:"imgTreeBox",staticStyle:{height:"400px"}},[i("el-tree",{ref:"checkprojectTree",staticClass:"4",attrs:{data:t.treeData,"check-strictly":!0,"node-key":"id","expand-on-click-node":!1,"show-checkbox":"","highlight-current":!0,props:{value:"id",label:"name"}},on:{"check-change":t.treeCheckChange}})],1),i("div",{staticClass:"shopCardClassBtn",on:{click:function(e){return t.toAddAssetsClass()}}},[t._v("添加")])]),i("el-dialog",{staticClass:"batchUploadDialog",attrs:{title:"选择标签",visible:t.addMoreAssetsLabelShow,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addMoreAssetsLabelShow=e},close:t.addMoreAssetsLabelClose}},[i("div",{staticClass:"imgTreeBox",staticStyle:{height:"400px"}},[i("div",{staticClass:"colimgIntroBox"},[i("el-select",{ref:"select",staticStyle:{width:"100%"},attrs:{"popper-append-to-body":!1,"filter-method":t.filterablemethod,multiple:"",clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择标签"},model:{value:t.selectlabelValue,callback:function(e){t.selectlabelValue=e},expression:"selectlabelValue"}},t._l(t.selectlabelList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)]),i("div",{staticClass:"shopCardClassBtn",on:{click:function(e){return t.toAddAssetsLabelHandel()}}},[t._v("添加")])]),i("el-dialog",{staticClass:"boardDiaStyle",attrs:{title:"添加到收藏",visible:t.addBoardShow,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addBoardShow=e}}},[i("span",{staticClass:"colimgIntroBox"},[i("el-input",{attrs:{placeholder:"搜索或者添加收藏",size:"small",clearable:""},on:{change:t.addBoardchChange},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addBoardchChange(e)}},model:{value:t.addBoardSearch,callback:function(e){t.addBoardSearch=e},expression:"addBoardSearch"}})],1),0==t.allBoardList.length?i("div",{staticClass:"toAddCreatedBorderStyle",staticStyle:{"margin-top":"10px"},on:{click:t.toAddCreatedBoard}},[i("span",{staticClass:"createdBtn"},[i("i",{staticClass:"el-icon-circle-plus"}),t._v(" 创建收藏\n      ")]),i("span",[t._v(t._s(t.addBoardSearch))])]):i("div",{staticStyle:{height:"300px","overflow-y":"auto","padding-bottom":"10px"}},t._l(t.allBoardList,function(e,s){return i("div",{key:s,staticClass:"selectBoardItemStyle"},[i("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[t._v("\n          "+t._s(e.name)+"\n        ")]),i("div",{staticClass:"shoujiStyle",staticStyle:{display:"inline-block"},on:{click:function(i){return t.submitForm(e)}}},[t._v("\n          添加\n        ")])])}),0)]),i("el-dialog",{staticClass:"boardDiaStyle",attrs:{title:"修改图片",visible:t.setimgBoxShow,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(e){t.setimgBoxShow=e},close:t.setimgBoxShowClose}},[i("div",{staticClass:"toAddCreatedBorderStyle",staticStyle:{"margin-top":"10px",height:"100px","border-bottom":"1px solid #d9d9d9"}},[i("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline-block","vertical-align":"text-bottom"},attrs:{action:"http://aniapi.tgyc.com/index.php/home/upload/upload_disk",headers:t.uploadHeader,"show-file-list":!1,"on-success":t.fileUploadSuccessHandel,"before-upload":t.beforeUploadHandel,accept:".jpg,.jpeg,.png,.JPG,.JPEG,.gif,.GIF",drag:""}},[i("img",{staticStyle:{"object-fit":"scale-down"},attrs:{src:t.setimgBoxForm.thum,alt:"",width:"160",height:"90"}})]),i("span",{staticClass:"ueModelTip",staticStyle:{"vertical-align":"text-bottom","margin-left":"10px"}},[i("i",{staticClass:"el-icon-info"}),t._v("\n        点击图片或拖拽到图上进行上传")])],1),i("div",[i("div",{staticClass:"uploadBtnBox",staticStyle:{"margin-top":"10px","margin-right":"10px"}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"http://aniapi.tgyc.com/index.php/home/upload/upload_disk",headers:t.uploadHeader,"show-file-list":!1,"on-success":t.imgupload,multiple:"",drag:"",accept:".jpg,.jpeg,.png,.JPG,.JPEG,.gif,.GIF,.fbx,.FBX,.mp4,.mov"}},[i("div",{staticClass:"uploadfileBox"},[i("i",{staticClass:"el-icon-plus"})])])],1),i("div",{staticStyle:{height:"400px","overflow-y":"auto","padding-bottom":"10px"}},[i("draggable",{on:{change:t.dataSortChange},model:{value:t.assetsImgList,callback:function(e){t.assetsImgList=e},expression:"assetsImgList"}},t._l(t.assetsImgList,function(e,s){return i("div",{key:s,staticStyle:{display:"inline-block","margin-right":"10px","margin-top":"10px",position:"relative",border:"1px solid #383838"}},["mp4"==e.file_type||"mov"==e.file_type?i("div",[i("div",{staticClass:"assetsImgListClose",on:{click:function(i){return t.toDelAssetsImgList(e,s)}}},[i("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"#d9d9d9"}})]),i("video",{attrs:{src:e.thum,controls:"",width:"160",height:"90"}})]):i("div",[i("div",{staticClass:"assetsImgListClose",on:{click:function(i){return t.toDelAssetsImgList(e,s)}}},[i("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"#d9d9d9"}})]),i("img",{staticStyle:{"object-fit":"scale-down","border-radius":"5px"},attrs:{src:e.thum,alt:"",width:"160",height:"90"}})])])}),0)],1)])]),i("el-dialog",{attrs:{title:"裁剪图片",visible:t.addAssetCropperbox,width:"500px"},on:{"update:visible":function(e){t.addAssetCropperbox=e}}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"img_box"},[i("vueCropper",{ref:"assetCropper",attrs:{img:t.addAssetOption.img,outputSize:t.addAssetOption.size,info:t.addAssetOption.info,canScale:t.addAssetOption.canScale,autoCrop:t.addAssetOption.autoCrop,autoCropWidth:t.addAssetOption.autoCropWidth,full:t.addAssetOption.full,autoCropHeight:t.addAssetOption.autoCropHeight,fixedBox:t.addAssetOption.fixedBox,fixedNumber:t.addAssetOption.fixedNumber,enlarge:t.addAssetOption.enlarge,centerBox:t.addAssetOption.centerBox}})],1),i("label",{staticClass:"btn",attrs:{for:"uploads"}},[t._v("上传图片")]),i("input",{staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"uploads",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:function(e){return t.assetUploadImg(e,1)}}}),i("button",{staticClass:"btn",on:{click:t.assetRotateLeft}},[t._v("向左翻转")]),i("button",{staticClass:"btn",on:{click:t.assetRotateRight}},[t._v("向右翻转")])])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.assetQueren}},[t._v("确 定")])],1)],1),i("addAssetsDialog",{ref:"addAssetsDialog",on:{addAsssetDialog:t.submitAsset}})],1)},[],!1,null,"36862a44",null);$.options.__file="index.vue";e.default=$.exports},"7ded":function(t,e,i){"use strict";var s=i("c601");i.n(s).a},c601:function(t,e,i){}}]);